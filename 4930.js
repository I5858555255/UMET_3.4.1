(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[4930],{32549:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("ai-detail",{staticClass:"changePwd",scopedSlots:t._u([{key:"footer",fn:function(){return[e("el-button",{on:{click:t.cancel}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("提交")])]},proxy:!0}])},[e("template",{slot:"title"},[e("ai-title",{attrs:{title:"修改密码",isShowBottomBorder:""}})],1),e("template",{slot:"content"},[e("ai-card",{attrs:{title:"修改密码"},scopedSlots:t._u([{key:"content",fn:function(){return[e("el-form",{ref:"form",staticClass:"ai-form",attrs:{model:t.form,"label-width":"110px","label-position":"right"}},[e("el-form-item",{staticStyle:{width:"100%!important"},attrs:{label:"旧密码",prop:"oldPwd",rules:[{required:!0,message:"请输入旧密码",trigger:"blur"}]}},[e("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",type:"password",placeholder:"请输入旧密码"},model:{value:t.form.oldPwd,callback:function(e){t.$set(t.form,"oldPwd",e)},expression:"form.oldPwd"}})],1),e("el-form-item",{staticStyle:{width:"100%!important"},attrs:{label:"新密码",prop:"newPwd",rules:[{required:!0,message:"请输入新密码",trigger:"blur"}]}},[e("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",type:"password",placeholder:"请输入新密码"},model:{value:t.form.newPwd,callback:function(e){t.$set(t.form,"newPwd",e)},expression:"form.newPwd"}})],1),e("el-form-item",{staticStyle:{width:"100%!important"},attrs:{label:"确认新密码",prop:"newPwd2",rules:[{required:!0,message:"请输入确认新密码",trigger:"blur"}]}},[e("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",type:"password",placeholder:"请输入确认新密码"},model:{value:t.form.newPwd2,callback:function(e){t.$set(t.form,"newPwd2",e)},expression:"form.newPwd2"}})],1)],1)]},proxy:!0}])})],1)],2)},i=[],o=(r(44114),{name:"ChangePwd",data(){const t=function(t,e,r){""===e?r(new Error("请输入手机号")):/^1\d{10}$/.test(e)?r():r(new Error("手机号格式错误"))},e=function(t,e,r){""===e?r(new Error("请输入新密码")):e.length<8||e.length>16?r(new Error("密码长度不能小于8位大于16位")):r()};return{form:{code:"",newPwd:"",phone:"",oldPwd:"",newPwd2:""},validatorPwd:e,validatorPhone:t,timer:null,time:60,isSend:!1,isStart:!1}},created(){},methods:{confirm(){this.$refs.form.validate((t=>{if(t){if(this.form.newPwd!==this.form.newPwd2)return this.$message.error("新密码和确认密码不一致");this.$http.post("/api/malluser/updatePwd",null,{params:{...this.form}}).then((t=>{0==t.code&&(this.$message.success("密码修改成功，请重新登录"),setTimeout((()=>{this.$store.commit("SignOut",!0)}),600))}))}}))},cancel(){this.$router.push("/")},getCode(){return this.isSend?this.$message.error("验证码已发送"):/^1[0-9]{10,10}$/.test(this.form.phone)?(this.isSend=!0,void this.$http.post(`/user/sendCode?phone=${this.form.phone}`).then((t=>{0===t.code&&(this.$message.success("验证码发送成功"),this.isStart=!0,this.timer=setInterval((()=>{if(0===this.time)return this.isSend=!1,this.isStart=!1,this.time=60,clearInterval(this.timer),!1;this.time=this.time-1}),1e3))})).catch((()=>{this.isSend=!1}))):this.$message.error("请输入正确到手机号")}}}),l=o,a=(r(26172),r(81656)),n=(0,a.A)(l,s,i,!1,null,"4a0596f5",null),d=n.exports},70258:function(t,e,r){"use strict";r.r(e);var s=r(31601),i=r.n(s),o=r(76314),l=r.n(o),a=l()(i());a.push([t.id,"",""]),e["default"]=a},26172:function(t,e,r){var s=r(70258);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=r(99548).A;i("50658956",s,!0,{sourceMap:!1,shadowMode:!1})}}]);