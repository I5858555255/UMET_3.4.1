"use strict";(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[115],{40115:function(e,t,l){l.r(t),l.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",[t("ai-list",{staticClass:"list"},[t("ai-title",{attrs:{slot:"title",title:"海外仓",isShowBottomBorder:""},slot:"title"}),t("template",{slot:"content"},[t("div",{staticClass:"content"},[t("ai-search-bar",{scopedSlots:e._u([{key:"left",fn:function(){return[t("div",{staticClass:"search-item"},[t("label",[e._v("海外仓：")]),t("ai-select",{attrs:{selectList:e.$dict.getDict("semi_warehouse"),size:"small"},model:{value:e.search.warehouseId,callback:function(t){e.$set(e.search,"warehouseId",t)},expression:"search.warehouseId"}})],1),t("div",{staticClass:"search-item"},[t("label",[e._v("店铺：")]),t("el-select",{attrs:{clearable:"",placeholder:"请选择店铺",size:"small"},model:{value:e.search.mallId,callback:function(t){e.$set(e.search,"mallId",t)},expression:"search.mallId"}},e._l(e.mallList,(function(e){return t("el-option",{key:e.mallId,attrs:{label:e.mallName,value:e.mallId}})})),1)],1)]},proxy:!0}])}),t("ai-search-bar",{scopedSlots:e._u([{key:"left",fn:function(){return[t("el-button",{class:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(t){return e.toAddWarehouse()}}},[e._v("添加")])]},proxy:!0},{key:"right",fn:function(){return[t("el-button",{class:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(t){return e.getList()}}},[e._v("查询")])]},proxy:!0}])}),t("ai-table",{staticStyle:{"margin-top":"8px"},attrs:{tableData:e.tableData,"col-configs":e.colConfigs,total:e.total,current:e.search.current,size:e.search.size,height:"700"},on:{"update:current":function(t){return e.$set(e.search,"current",t)},"update:size":function(t){return e.$set(e.search,"size",t)},getList:e.getList}},[t("el-table-column",{attrs:{slot:"warehouseId",label:"海外仓","show-overflow-tooltip":"",align:"left"},slot:"warehouseId",scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",[e._v(e._s(e.$dict.getLabel("semi_warehouse",l.row.warehouseId)))])]}}])}),t("el-table-column",{attrs:{slot:"options",label:"操作",align:"center",fixed:"right",width:"140px"},slot:"options",scopedSlots:e._u([{key:"default",fn:function({row:l}){return[t("div",{staticClass:"table-options"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.remove(l.id)}}},[e._v("删除")])],1)]}}])})],1)],1)])],2),t("ai-dialog",{attrs:{title:"添加海外仓",visible:e.dlgShow,"close-on-click-modal":!1,width:"790px",customFooter:""},on:{"update:visible":function(t){e.dlgShow=t},close:e.handleClose}},[t("el-form",{ref:"form",staticClass:"ai-form",attrs:{model:e.form,"label-width":"160px"}},[t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"店铺",prop:"mallId",rules:[{required:!0,message:"请选择店铺",trigger:"blur"}]}},[t("el-select",{staticStyle:{width:"380px"},attrs:{placeholder:"请选择"},model:{value:e.form.mallId,callback:function(t){e.$set(e.form,"mallId",t)},expression:"form.mallId"}},e._l(e.mallList,(function(e){return t("el-option",{key:e.mallId,attrs:{label:e.mallName,value:e.mallId}})})),1)],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"海外仓",prop:"warehouseId",rules:[{required:!0,message:"请选择海外仓",trigger:"blur"}]}},[t("ai-select",{attrs:{selectList:e.$dict.getDict("semi_warehouse")},model:{value:e.form.warehouseId,callback:function(t){e.$set(e.form,"warehouseId",t)},expression:"form.warehouseId"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"海外仓子仓编码",prop:"warehouseCode",rules:[{required:!0,message:"请输入海外仓子仓编码",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入海外仓子仓编码"},model:{value:e.form.warehouseCode,callback:function(t){e.$set(e.form,"warehouseCode",t)},expression:"form.warehouseCode"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"TEMU海外仓编码",prop:"temuWarehouseId",rules:[{required:!0,message:"请输入TEMU海外仓编码",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入TEMU海外仓编码"},model:{value:e.form.temuWarehouseId,callback:function(t){e.$set(e.form,"temuWarehouseId",t)},expression:"form.temuWarehouseId"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"TEMU海外仓名称",prop:"temuWarehouseCode",rules:[{required:!0,message:"请输入TEMU海外仓名称",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入TEMU海外仓名称"},model:{value:e.form.temuWarehouseCode,callback:function(t){e.$set(e.form,"temuWarehouseCode",t)},expression:"form.temuWarehouseCode"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dlgShow=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addWarehouse}},[e._v("确定")])],1)],1)],1)},a=[],o=(l(98992),l(54520),l(31052)),r={name:"SemiWarehouse",data(){return{search:{current:1,size:10,warehouseId:"",mallId:""},form:{mallId:"",mallName:"",warehouseId:"",warehouseCode:"",temuWarehouseId:"",temuWarehouseId:""},colConfigs:[{slot:"warehouseId",label:"海外仓",align:"left"},{prop:"warehouseCode",label:"海外仓子仓编码",align:"left"},{prop:"temuWarehouseId",label:"TEMU海外仓编码",align:"left"},{prop:"temuWarehouseCode",label:"TEMU海外仓名称",align:"left"},{prop:"mallName",label:"店铺名称",align:"left"},{prop:"createTime",label:"创建时间",width:"180px",fixed:"right"}],tableData:[],total:0,dlgShow:!1}},computed:{mallList(){const e=this.$store.state.mallList.filter((e=>e.isSemiManagedMall));return e}},created(){this.$dict.load("semi_warehouse"),this.getList()},methods:{getList(){this.$http.post("/api/semi/semiWarehouse/myPage",null,{params:{...this.search}}).then((e=>{this.tableData=e.data.records,this.total=e.data.total}))},remove(e){this.$confirm("确定要删除？","温馨提示",{type:"warning"}).then((()=>{this.$http.post(`/api/semi/semiWarehouse/del?id=${e}`).then((e=>{0==e.code&&(this.$message.success("删除成功！"),this.getList())}))}))},handleClose(){this.dlgShow=!1},toAddWarehouse(){this.$http.post("/api/malluser/info").then((e=>{if(0==e.code){if(this.$store.commit("setUserInfo",e.data),1!=e.data.flag)return o.Message.error("您的账号未激活或已失效，请激活后使用"),void this.$store.commit("setActiveDlgShow",!0);this.dlgShow=!0}}))},addWarehouse(){let e=this.mallList.filter((e=>e.mallId==this.form.mallId));this.form.mallName=e[0].mallName,this.$refs.form.validate((e=>{e&&this.$http.post("/api/semi/semiWarehouse/add",this.form).then((e=>{0===e.code&&(o.Message.success("添加成功"),this.dlgShow=!1,this.getList())}))}))}}},i=r,u=l(81656),n=(0,u.A)(i,s,a,!1,null,"75327918",null),d=n.exports}}]);