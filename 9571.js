(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[9571],{49571:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var o=function(){var e=this,t=e._self._c;return t("div",[t("ai-list",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"list",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[t("ai-title",{attrs:{slot:"title",title:"一件代发出库(正仓)",isShowBottomBorder:""},slot:"title"}),t("template",{slot:"content"},[t("div",{staticClass:"content"},[t("ai-search-bar",{scopedSlots:e._u([{key:"left",fn:function(){return[t("div",{staticClass:"search-item"},[t("label",{staticStyle:{width:"90px"}},[e._v("创建人：")]),t("el-input",{attrs:{size:"small",placeholder:"请输入创建人"},model:{value:e.search.createUser,callback:function(t){e.$set(e.search,"createUser",t)},expression:"search.createUser"}})],1),t("div",{staticClass:"search-item"},[t("label",{staticStyle:{width:"90px"}},[e._v("创建时间：")]),t("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:e.search.dateRange,callback:function(t){e.$set(e.search,"dateRange",t)},expression:"search.dateRange"}})],1)]},proxy:!0}])}),t("ai-search-bar",{scopedSlots:e._u([{key:"right",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:e.exportToExcel}},[e._v("导出")]),t("el-button",{class:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(t){return e.toLoad()}}},[e._v("查询")])]},proxy:!0}])}),t("ai-card",{staticStyle:{"padding-bottom":"40px"},attrs:{title:"数据明细"}},[t("ai-table",{staticStyle:{"margin-top":"8px"},attrs:{tableData:e.filterData,"col-configs":e.colConfigs,total:e.filterData.length,current:e.search.current,size:e.search.size,height:"700",isShowPagination:!1},on:{"update:current":function(t){return e.$set(e.search,"current",t)},"update:size":function(t){return e.$set(e.search,"size",t)},getList:()=>{}}})],1)],1)])],2)],1)},n=[],r=(a(44114),a(98992),a(54520),a(81454),a(14603),a(47566),a(98721),a(31052)),i=a(73236),s=a(3959),l=a(4213),c={name:"SemiOrder_LX",data(){return{search:{createUser:null,dateRange:[]},colConfigs:[{prop:"createBy",label:"创建人",align:"left"},{prop:"outboundOrderNo",label:"订单号",align:"left"},{prop:"whName",label:"仓库",align:"left"},{prop:"logisticsChannelName",label:"运输方式",align:"left"},{prop:"trackNo",label:"跟踪号",align:"left"},{prop:"platformOrderNo",label:"平台单号",align:"left"},{prop:"costBillTotal",label:"费用(USD)",align:"left"},{prop:"statusName",label:"状态",align:"left"},{prop:"createTime",label:"审核时间",align:"left"},{prop:"outboundTime",label:"出库时间",align:"left"}],isLoading:!1,tableData:[],currentIndex:0,total:0,pageNo:1,pageSize:100,productList:[]}},computed:{filterData(){return this.search.createUser?this.tableData.filter((e=>e.createBy==this.search.createUser)):this.tableData}},created(){},methods:{async toLoad(){this.search.dateRange&&0!=this.search.dateRange.length?(this.isLoading=!0,this.tableData=[],this.pageNo=1,await this.load(),this.isLoading=!1):r.Message.error("请选择创建时间范围")},async load(){let e=await(0,i.nM)({url:"gateway/woms/outboundOrder/small/page",method:"POST",data:{current:this.pageNo,size:this.pageSize,orderType:1,appendixFlag:"",orderSourceList:[],logisticsChannel:"",salesPlatform:"",timeType:"orderCreateTime",startTime:this.search.dateRange[0]+" 00:00:00",endTime:this.search.dateRange[1]+" 23:59:59",orderNoType:"outboundOrderNo"}});200==e.code&&e.data.records.map((e=>{this.tableData.push({...e})})),this.pageNo*this.pageSize>e.data.total?this.isLoading=!1:(this.pageNo++,await this.load())},exportToExcel(){const e=[["创建人","订单号","仓库","运输方式","跟踪号","平台单号","费用(USD)","状态","审核时间","出库时间","SKU","数量"]];this.filterData.map((t=>{t.productList.map((a=>{e.push([t.createBy,t.outboundOrderNo,t.whName,t.logisticsChannelName,t.trackNo,t.platformOrderNo,t.costBillTotal,t.statusName,t.createTime,t.outboundTime,a.sku,a.quantity])}))}));const t=s.Wp.aoa_to_sheet(e),a=s.Wp.book_new();s.Wp.book_append_sheet(a,t,"Sheet1");const o=s.M9(a,{bookType:"xlsx",type:"array"}),n=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),r=window.URL.createObjectURL(n);(0,l.saveAs)(n,"一件代发订单列表.xlsx"),window.URL.revokeObjectURL(r)}}},d=c,p=(a(97789),a(81656)),u=(0,p.A)(d,o,n,!1,null,"ef31943c",null),f=u.exports},42479:function(e,t,a){"use strict";a.r(t);var o=a(31601),n=a.n(o),r=a(76314),i=a.n(r),s=i()(n());s.push([e.id,".list .title-right[data-v-ef31943c]{display:flex;align-items:center}.list .title-right>div[data-v-ef31943c]:first-child{margin-right:20px}.list[data-v-ef31943c].ai-list .ai-list__content--right-wrapper{background:transparent;box-shadow:none;padding:0!important}",""]),t["default"]=s},4213:function(e,t,a){var o,n,r;(function(a,i){n=[],o=i,r="function"===typeof o?o.apply(t,n):o,void 0===r||(e.exports=r)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function o(e,t,a){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){l(o.response,t,a)},o.onerror=function(){console.error("could not download file")},o.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a.g&&a.g.global===a.g?a.g:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,a){var s=i.URL||i.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?r(l):n(l.href)?o(e,t,a):r(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){r(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,i){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),a);else if(n(e))o(e,a,i);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){r(s)}))}}:function(e,t,a,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return o(e,t,a);var r="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&l||s)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},d.readAsDataURL(e)}else{var p=i.URL||i.webkitURL,u=p.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout((function(){p.revokeObjectURL(u)}),4e4)}});i.saveAs=l.saveAs=l,e.exports=l}))},97789:function(e,t,a){var o=a(42479);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var n=a(99548).A;n("4fc43fcd",o,!0,{sourceMap:!1,shadowMode:!1})}}]);