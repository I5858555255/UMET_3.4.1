(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[4923],{74923:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return I}});var i=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[e("keep-alive",{attrs:{include:["List"]}},[e(t.component,{ref:"component",tag:"component",attrs:{params:t.params},on:{change:t.onChange}})],1)],1)],1)},s=[],l=function(){var t=this,e=t._self._c;return e("div",[e("ai-list",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"list",attrs:{"element-loading-text":"正在采集中……","element-loading-spinner":"el-icon-loading"}},[e("ai-title",{attrs:{slot:"title",title:"店铺跟踪",isShowBottomBorder:""},slot:"title"}),e("template",{slot:"content"},[e("div",{staticClass:"content"},[e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("el-button",{class:"el-button el-button--primary",attrs:{type:"button",icon:"el-icon-delete"},on:{click:function(e){return t.batchRemove()}}},[t._v("删除")]),e("el-button",{class:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(e){return t.batchCollect()}}},[t._v("批量采集")]),e("el-button",{class:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(e){return t.addStore()}}},[t._v("添加店铺")])]},proxy:!0},{key:"right",fn:function(){return[e("el-button",{attrs:{size:"small",circle:"",icon:"el-icon-refresh-right"},on:{click:function(e){return t.getList()}}})]},proxy:!0}])}),e("ai-table",{staticStyle:{"margin-top":"8px"},attrs:{tableData:t.tableData,"col-configs":t.colConfigs,total:t.total,current:t.search.current,size:t.search.size},on:{"selection-change":t.onChooseChange,"update:current":function(e){return t.$set(t.search,"current",e)},"update:size":function(e){return t.$set(t.search,"size",e)},getList:t.getList}},[e("el-table-column",{attrs:{slot:"options",label:"操作",width:"240px","show-overflow-tooltip":"",align:"center",fixed:"right"},slot:"options",scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",{staticClass:"table-options"},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.deleteMonitor(a.id)}}},[t._v("删除")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.toUpdateMonitor(a)}}},[t._v("修改")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.renew(a.id)}}},[t._v("续费")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.toDetail(a.id,a.content,a.source)}}},[t._v("详情")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.toBegin(a)}}},[t._v("采集数据")])],1)]}}])}),e("el-table-column",{attrs:{slot:"content",label:"店铺ID","show-overflow-tooltip":"",align:"center"},slot:"content",scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",["0"==a.source?e("a",{staticClass:"el-link el-link--primary",attrs:{href:"https://www.temu.com/mall.html?mall_id="+a.content,target:"_blank"}},[t._v(t._s(a.content))]):"1"==a.source?e("a",{staticClass:"el-link el-link--primary",attrs:{href:"https://www.shein.com/store/home?store_code="+a.content,target:"_blank"}},[t._v(t._s(a.content))]):t._e()])]}}])}),e("el-table-column",{attrs:{slot:"source",label:"来源","show-overflow-tooltip":"",align:"center"},slot:"source",scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(" "+t._s("0"==e.source?"TEMU":"希音")+" ")]}}])})],1)],1)])],2),e("ai-dialog",{attrs:{title:"添加店铺",visible:t.isDlgShow,"close-on-click-modal":!1,width:"790px",customFooter:""},on:{"update:visible":function(e){t.isDlgShow=e},close:function(e){t.isDlgShow=!1}}},[e("el-alert",{attrs:{title:"添加一个店铺跟踪，将消耗300金币",type:"success",closable:!1}}),e("el-form",{ref:"form",staticClass:"ai-form",staticStyle:{"margin-top":"20px"},attrs:{model:t.form,"label-width":"120px"}},[e("el-form-item",{attrs:{prop:"mallId",label:"店铺ID",rules:[{required:!0,message:"请输入店铺ID",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"请输入店铺ID"},model:{value:t.form.mallId,callback:function(e){t.$set(t.form,"mallId",e)},expression:"form.mallId"}})],1),e("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"来源",prop:"source",rules:[{required:!0,message:"请选择来源",trigger:"blur"}]}},[e("el-radio-group",{attrs:{size:"medium"},model:{value:t.form.source,callback:function(e){t.$set(t.form,"source",e)},expression:"form.source"}},[e("el-radio",{attrs:{label:0}},[t._v("TEMU")]),e("el-radio",{attrs:{label:1}},[t._v("希音")])],1)],1),e("el-form-item",{attrs:{prop:"remark",label:"备注",rules:[{required:!0,message:"请输入备注",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.isDlgShow=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveStore}},[t._v("确定")])],1)],1),e("ai-dialog",{attrs:{title:"修改店铺",visible:t.isUpdateDlgShow,"close-on-click-modal":!1,width:"790px",customFooter:""},on:{"update:visible":function(e){t.isUpdateDlgShow=e},close:function(e){t.isDlgShow=!1}}},[e("el-form",{ref:"updateForm",staticClass:"ai-form",attrs:{model:t.updateForm,"label-width":"120px"}},[e("el-form-item",{attrs:{prop:"mallId",label:"店铺ID",rules:[{required:!0,message:"请输入店铺ID",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"请输入店铺ID",disabled:""},model:{value:t.updateForm.mallId,callback:function(e){t.$set(t.updateForm,"mallId",e)},expression:"updateForm.mallId"}})],1),e("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"来源：",prop:"source",rules:[{required:!0,message:"请选择来源",trigger:"blur"}]}},[e("el-radio-group",{attrs:{disabled:"",size:"medium"},model:{value:t.updateForm.source,callback:function(e){t.$set(t.updateForm,"source",e)},expression:"updateForm.source"}},[e("el-radio",{attrs:{label:0}},[t._v("TEMU")]),e("el-radio",{attrs:{label:1}},[t._v("希音")])],1)],1),e("el-form-item",{attrs:{prop:"remark",label:"备注",rules:[{required:!0,message:"请输入备注",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.updateForm.remark,callback:function(e){t.$set(t.updateForm,"remark",e)},expression:"updateForm.remark"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.isUpdateDlgShow=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.updateStore}},[t._v("确定")])],1)],1)],1)},o=[],r=(a(44114),a(81454),a(73236)),n={name:"List",data(){return{search:{current:1,type:"1",size:10},colConfigs:[{type:"selection",width:"70px",align:"left"},{slot:"content",label:"店铺ID",align:"left"},{prop:"remark",label:"备注",align:"left"},{prop:"lastUpdateTime",label:"最后一次更新时间",align:"left"},{prop:"status",label:"状态",align:"left",format:t=>this.$dict.getLabel("monitor_status",t)},{slot:"source",label:"来源",align:"left"},{prop:"expireTime",label:"失效时间",align:"left"},{prop:"createTime",label:"添加时间",width:"180px",fixed:"right"}],tableData:[],total:0,form:{mallId:"",source:0,remark:""},updateObj:{},isUpdateDlgShow:!1,updateForm:{id:"",mallId:"",source:"",remark:""},isDlgShow:!1,detailsVo:{},pageNo:1,pageSize:120,isLoading:!1,selectRows:[],isBatchCollect:!1}},created(){this.$dict.load("monitor_status"),this.getList()},methods:{getList(){this.$http.post("/api/monitor/myPage",null,{params:{...this.search}}).then((t=>{this.tableData=t.data.records,this.total=t.data.total}))},onChooseChange(t){this.selectRows=t},saveStore(){this.$refs.form.validate((t=>{t&&this.$http.post("/api/monitor/check",null,{params:{type:1}}).then((t=>{0==t.code&&this.$http.post("/api/monitor/add",{content:this.form.mallId,source:this.form.source,remark:this.form.remark,type:this.search.type}).then((t=>{0==t.code&&(this.$message.success("添加成功！"),this.$store.dispatch("getUserInfo"),this.getList(),this.isDlgShow=!1)}))}))}))},toUpdateMonitor(t){this.updateObj=t,this.updateForm.mallId=t.content,this.updateForm.source=t.source,this.updateForm.remark=t.remark,this.isUpdateDlgShow=!0},updateStore(){this.$refs.updateForm.validate((t=>{t&&this.$http.post("/api/monitor/update",{id:this.updateObj.id,remark:this.updateForm.remark}).then((t=>{0==t.code&&(this.$message.success("修改成功！"),this.getList(),this.isUpdateDlgShow=!1)}))}))},batchRemove(){if(this.selectRows.length<=0)return void this.$message.error("请选择要删除的监测对象");let t=this.selectRows.map((t=>t.id));this.$confirm("确定要删除？","温馨提示",{type:"warning"}).then((()=>{this.$http.post("/api/monitor/delByIds",t).then((t=>{0==t.code&&(this.$message.success("删除成功！"),this.getList())}))}))},batchCollect(){this.selectRows.length<=0?this.$message.error("请选择要采集的监测对象"):(this.isBatchCollect=!0,this.isLoading=!0,this.selectRows.map(((t,e)=>{setTimeout((()=>{this.pageNo=1;let a={};a.monitorId=t.id,a.source=t.source,a.details=[],this.beginCollect(t,a,e)}),1e3*(e+1))})))},renew(t){this.$confirm("确定要续费？","温馨提示",{type:"warning"}).then((()=>{this.$http.post("/api/monitor/renew",null,{params:{id:t}}).then((t=>{0==t.code&&(this.$message.success("续费成功！"),this.$store.dispatch("getUserInfo"),this.getList())}))}))},deleteMonitor(t){this.$confirm("确定要删除？","温馨提示",{type:"warning"}).then((()=>{this.$http.post("/api/monitor/del",null,{params:{id:t}}).then((t=>{0==t.code&&(this.$message.success("删除成功！"),this.getList())}))}))},toDetail(t,e,a){"0"==a?this.$emit("change",{type:"Detail",params:{id:t||"",content:e}}):this.$emit("change",{type:"SheinDetail",params:{id:t||"",content:e}})},addStore(){this.form.mallId="",this.isDlgShow=!0},toBegin(t){this.isBatchCollect=!1,this.pageNo=1,this.isLoading=!0;let e={};e.monitorId=t.id,e.details=[],this.beginCollect(t,e,0)},beginCollect(t,e,a){"0"==t.source?this.beginTemuCollect(t,e,a):"1"==t.source&&this.beginSheinCollect(t,e,a)},beginTemuCollect(t,e,a){(0,r.FG)({url:"api/bg/circle/c/mall/newGoodsList",anti:!0,data:{mall_id:t.content,filter_items:"0:1",page_number:this.pageNo,scene_code:"mall_rule",page_size:this.pageSize}}).then((i=>{this.isBatchCollect&&a+1==this.selectRows.length?(this.isLoading=!1,this.isBatchCollect=!1):this.isLoading=!1,1e6==i.errorCode?(i.result.data.goods_list.map((t=>{let a=0;t.sales_tip_text[0]&&(a=t.sales_tip_text[0],a=a.replace("+",""),-1!=a.indexOf("K")?(a=a.replace("K",""),a*=1e3):-1!=a.indexOf("M")&&(a=a.replace("M",""),a*=1e6)),e.details.push({url:"https://www.temu.com/goods.html?goods_id="+t.goods_id,price:t.price_info.price_schema?.replace("$",""),saleTotal:a,goodsId:t.goods_id,imgUrl:t.thumb_url,mallId:t.mall_id})})),i.result.data.goods_list.length==this.pageSize?(this.pageNo=this.pageNo+1,this.beginCollect(t,e,a)):(this.isLoading=!1,this.$http.post("/api/monitorDetail/addDetails",e).then((e=>{0==e.code&&(this.$message.success("店铺ID【"+t.content+"】数据采集成功！"),this.getList())})))):(this.isLoading=!1,this.$message.error("采集失败，请检查https://www.temu.com是否能正常访问"))}))},async beginSheinCollect(t,e,a){let i=await(0,r.Rx)({url:"api/store/items/get",method:"GET",params:{_ver:"1.1.8",_lang:"en",scene_id:"10188",rule_poskey:"shoprecommend",requestType:"pageChange",search_type:"store",store_code:t.content,viewed_goods:"",limit:120,page:this.pageNo}});this.isBatchCollect&&a+1==this.selectRows.length?(this.isLoading=!1,this.isBatchCollect=!1):this.isLoading=!1,i.goods&&i.goods.length>0&&(i.goods.map((t=>{let a=0;t.pretreatInfo?.sellingPointUniversalLabels&&(a=t.pretreatInfo.sellingPointUniversalLabels[0].starComment?.comment_num||0),e.details.push({url:"https://www.shein.com/"+t.goods_url_name.replace(/ /g,"-")+"-p-"+t.goods_id+"-cat-"+t.cat_id+".html",price:t.salePrice.amount,saleTotal:a,goodsId:t.goods_id,imgUrl:"https:"+t.goods_img,mallId:t.store_code})})),i.goods.length==this.pageSize?(this.pageNo=this.pageNo+1,this.beginCollect(t,e,a)):(this.isLoading=!1,this.$http.post("/api/monitorDetail/addDetails",e).then((e=>{0==e.code&&(this.$message.success("店铺ID【"+t.content+"】数据采集成功！"),this.getList())}))))}}},c=n,d=a(81656),p=(0,d.A)(c,l,o,!1,null,"6e1d7c22",null),h=p.exports,u=function(){var t=this,e=t._self._c;return e("div",[e("ai-list",{staticClass:"list"},[e("ai-title",{attrs:{slot:"title",title:`店铺ID(${t.content})商品列表`,isShowBottomBorder:"",isShowBack:""},on:{onBackClick:function(e){return t.cancel(!1)}},slot:"title"}),e("template",{slot:"content"},[e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("label",{staticStyle:{width:"80px"}},[t._v("排序方式：")]),e("el-select",{attrs:{clearable:!0,placeholder:"请选择排序方式",size:"small"},on:{change:function(e){t.search.current=1,t.getList()}},model:{value:t.search.orderBy,callback:function(e){t.$set(t.search,"orderBy",e)},expression:"search.orderBy"}},t._l(t.orderBys,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("label",{staticStyle:{width:"80px"}},[t._v("价格区间：")]),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.priceBegin,callback:function(e){t.$set(t.search,"priceBegin",e)},expression:"search.priceBegin"}}),t._v(" ~ "),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.priceEnd,callback:function(e){t.$set(t.search,"priceEnd",e)},expression:"search.priceEnd"}}),e("label",{staticStyle:{width:"80px"}},[t._v("销量区间：")]),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.saleBegin,callback:function(e){t.$set(t.search,"saleBegin",e)},expression:"search.saleBegin"}}),t._v(" ~ "),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.saleEnd,callback:function(e){t.$set(t.search,"saleEnd",e)},expression:"search.saleEnd"}}),e("label",{staticStyle:{width:"100px"}},[t._v("仅显示最新：")]),e("ai-select",{attrs:{selectList:t.$dict.getDict("mall_yesno")},model:{value:t.search.isNew,callback:function(e){t.$set(t.search,"isNew",e)},expression:"search.isNew"}}),e("label",{staticStyle:{width:"100px"}},[t._v("仅显示下架：")]),e("ai-select",{attrs:{selectList:t.$dict.getDict("mall_yesno")},model:{value:t.search.isOff,callback:function(e){t.$set(t.search,"isOff",e)},expression:"search.isOff"}})]},proxy:!0},{key:"right",fn:function(){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.search.current=1,t.getList()}}},[t._v("查询")])]},proxy:!0}])}),e("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr 1fr 1fr 1fr 1fr",gap:"16px"}},[t._l(t.tableData,(function(i){return e("el-card",{key:i.id,attrs:{"body-style":{padding:"0px",margin:"5px"}}},["1"==i.isOff?e("div",{class:[{"img-background":i.isSelect},"img-box"]},[e("div",[e("el-image",{staticClass:"mask image",attrs:{src:i.imgUrl,"preview-src-list":[i.imgUrl]}})],1),e("span",{staticClass:"icon-box"},[e("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a(50865)}})])]):e("span",{staticClass:"nav-label labelBadge"},[1==i.isNew?e("span",{staticClass:"ii"},[t._v("新")]):t._e(),e("el-image",{staticClass:"image",attrs:{src:i.imgUrl,"preview-src-list":[i.imgUrl]}})],1),e("div",{staticStyle:{padding:"14px"}},[e("div",{staticClass:"bottom clearfix"},[e("div",{staticStyle:{"margin-bottom":"5px"}},[e("div",{staticStyle:{display:"inline","margin-left":"5px"}},[t._v("$"+t._s(i.price)),e("sub",{staticStyle:{"margin-left":"2px"},domProps:{innerHTML:t._s(t.getPricePercent(i.priceChange))}})]),e("div",{staticStyle:{display:"inline","margin-right":"5px",float:"right"}},[t._v(t._s(i.saleTotal)),e("sub",{staticStyle:{"margin-left":"2px"},domProps:{innerHTML:t._s(t.getSalePercent(i.saleChange))}})])]),e("div",["5"==t.search.orderBy?e("div",{staticStyle:{display:"inline"}},[t._v("近3次日均销量: "),e("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(i.days3AverageSale))])]):"6"==t.search.orderBy?e("div",{staticStyle:{display:"inline"}},[t._v("近7次日均销量: "),e("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(i.days7AverageSale))])]):"7"==t.search.orderBy?e("div",{staticStyle:{display:"inline"}},[t._v("近15次日均销量: "),e("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(i.days15AverageSale))])]):e("div",{staticStyle:{display:"inline"}},[t._v("日均销量: "),e("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(i.averageSale))])]),e("ai-product-drop-down",{staticStyle:{float:"right"},attrs:{params:i,isShowDetail:!0,isShowAddFavorite:!0,isShowDelFavorite:!1},on:{onGoDetail:function(e){return t.goDetail(i.goodsId,i.monitorId)}}})],1)])])])})),e("el-pagination",{staticStyle:{position:"absolute",bottom:"0px",right:"40px"},attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.search.size,"current-page":t.search.current},on:{"update:pageSize":function(e){return t.$set(t.search,"size",e)},"update:page-size":function(e){return t.$set(t.search,"size",e)},"update:currentPage":function(e){return t.$set(t.search,"current",e)},"update:current-page":function(e){return t.$set(t.search,"current",e)},"current-change":t.getList}})],2)],1)],2),e("div",{staticClass:"productDetail"},[e("el-dialog",{attrs:{title:"商品详情",visible:t.isShowDetailDlg,"close-on-click-modal":!1,width:"80%","before-close":t.handleClose}},[t.isShowDetailDlg?e("ai-product-detail",{attrs:{params:t.detailParams}}):t._e()],1)],1)],1)},m=[],g=a(12411),f=a(8418),b={name:"DetailPage",props:["params"],components:{AiProductDetail:g["default"],AiProductDropDown:f["default"]},data(){return{monitorId:"",content:"",search:{current:1,type:"1",size:120,orderBy:"",priceBegin:"",priceEnd:"",saleBegin:"",saleEnd:"",isNew:"",isOff:""},orderBys:[{value:"0",label:"按销量涨辐排序"},{value:"1",label:"按价格涨辐排序"},{value:"2",label:"按销量排序"},{value:"3",label:"按价格排序"},{value:"4",label:"按日均销量排序"},{value:"5",label:"按近3次采集平均销售量排序"},{value:"6",label:"按近7次采集平均销售量排序"},{value:"7",label:"按近15次采集平均销售量排序"}],tableData:[],total:0,isShowDetailDlg:!1,detailParams:{}}},created(){this.$dict.load("mall_yesno"),this.monitorId=this.params.id,this.content=this.params.content,this.getList()},methods:{getList(){this.$http.post("/api/monitorDetail/myPageNew",null,{params:{monitorId:this.monitorId,...this.search}}).then((t=>{this.tableData=t.data.records,this.total=t.data.total}))},cancel(t){this.$emit("change",{type:"List",isRefresh:!!t})},getPricePercent(t){return t<0?'<div style="display: inline; color: green">↓'+t+"%</div>":t>0?'<div style="display: inline; color: red">↑'+t+"%</div>":""},getSalePercent(t){return t<0?'<div style="display: inline; color: green">↓'+t+"%</div>":t>0?'<div style="display: inline; color: red">↑'+t+"%</div>":""},handleClose(){this.isShowDetailDlg=!1},goDetail(t,e){this.detailParams={goodsId:t,monitorId:e},this.isShowDetailDlg=!0}}},v=b,y=(a(38819),(0,d.A)(v,u,m,!1,null,"c7e6880a",null)),w=y.exports,_=function(){var t=this,e=t._self._c;return e("div",[e("ai-list",{staticClass:"list"},[e("ai-title",{attrs:{slot:"title",title:`店铺ID(${t.content})商品列表`,isShowBottomBorder:"",isShowBack:""},on:{onBackClick:function(e){return t.cancel(!1)}},slot:"title"}),e("template",{slot:"content"},[e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("label",{staticStyle:{width:"80px"}},[t._v("排序方式：")]),e("el-select",{attrs:{clearable:!0,placeholder:"请选择排序方式",size:"small"},on:{change:function(e){t.search.current=1,t.getList()}},model:{value:t.search.orderBy,callback:function(e){t.$set(t.search,"orderBy",e)},expression:"search.orderBy"}},t._l(t.orderBys,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("label",{staticStyle:{width:"80px"}},[t._v("价格区间：")]),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.priceBegin,callback:function(e){t.$set(t.search,"priceBegin",e)},expression:"search.priceBegin"}}),t._v(" ~ "),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.priceEnd,callback:function(e){t.$set(t.search,"priceEnd",e)},expression:"search.priceEnd"}}),e("label",{staticStyle:{width:"80px"}},[t._v("评论数区间：")]),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.saleBegin,callback:function(e){t.$set(t.search,"saleBegin",e)},expression:"search.saleBegin"}}),t._v(" ~ "),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.saleEnd,callback:function(e){t.$set(t.search,"saleEnd",e)},expression:"search.saleEnd"}}),e("label",{staticStyle:{width:"100px"}},[t._v("仅显示最新：")]),e("ai-select",{attrs:{selectList:t.$dict.getDict("mall_yesno")},model:{value:t.search.isNew,callback:function(e){t.$set(t.search,"isNew",e)},expression:"search.isNew"}}),e("label",{staticStyle:{width:"100px"}},[t._v("仅显示下架：")]),e("ai-select",{attrs:{selectList:t.$dict.getDict("mall_yesno")},model:{value:t.search.isOff,callback:function(e){t.$set(t.search,"isOff",e)},expression:"search.isOff"}})]},proxy:!0},{key:"right",fn:function(){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.search.current=1,t.getList()}}},[t._v("查询")])]},proxy:!0}])}),e("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr 1fr 1fr 1fr 1fr",gap:"16px"}},[t._l(t.tableData,(function(i){return e("el-card",{key:i.id,attrs:{"body-style":{padding:"0px",margin:"5px"}}},["1"==i.isOff?e("div",{class:[{"img-background":i.isSelect},"img-box"]},[e("div",[e("el-image",{staticClass:"mask image",attrs:{src:i.imgUrl,"preview-src-list":[i.imgUrl]}})],1),e("span",{staticClass:"icon-box"},[e("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a(50865)}})])]):e("span",{staticClass:"nav-label labelBadge"},[1==i.isNew?e("span",{staticClass:"ii"},[t._v("新")]):t._e(),e("el-image",{staticClass:"image",attrs:{src:i.imgUrl,"preview-src-list":[i.imgUrl]}})],1),e("div",{staticStyle:{padding:"14px"}},[e("div",{staticClass:"bottom clearfix"},[e("div",{staticStyle:{"margin-bottom":"5px"}},[e("div",{staticStyle:{display:"inline","margin-left":"5px"}},[t._v("$"+t._s(i.price)),e("sub",{staticStyle:{"margin-left":"2px"},domProps:{innerHTML:t._s(t.getPricePercent(i.priceChange))}})]),e("div",{staticStyle:{display:"inline","margin-right":"5px",float:"right"}},[t._v(t._s(i.saleTotal)),e("sub",{staticStyle:{"margin-left":"2px"},domProps:{innerHTML:t._s(t.getSalePercent(i.saleChange))}})])]),e("div",["5"==t.search.orderBy?e("div",{staticStyle:{display:"inline"}},[t._v("近3次日均评论数: "),e("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(i.days3AverageSale))])]):"6"==t.search.orderBy?e("div",{staticStyle:{display:"inline"}},[t._v("近7次日均评论数: "),e("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(i.days7AverageSale))])]):"7"==t.search.orderBy?e("div",{staticStyle:{display:"inline"}},[t._v("近15次日均评论数: "),e("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(i.days15AverageSale))])]):e("div",{staticStyle:{display:"inline"}},[t._v("日均评论数: "),e("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v(t._s(i.averageSale))])]),e("ai-product-drop-down",{staticStyle:{float:"right"},attrs:{params:i,isHideCopy:!0,isShowDetail:!0,isShowAddFavorite:!0,isShowDelFavorite:!1},on:{onGoDetail:function(e){return t.goDetail(i.goodsId,i.monitorId)}}})],1)])])])})),e("el-pagination",{staticStyle:{position:"absolute",bottom:"0px",right:"40px"},attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.search.size,"current-page":t.search.current},on:{"update:pageSize":function(e){return t.$set(t.search,"size",e)},"update:page-size":function(e){return t.$set(t.search,"size",e)},"update:currentPage":function(e){return t.$set(t.search,"current",e)},"update:current-page":function(e){return t.$set(t.search,"current",e)},"current-change":t.getList}})],2)],1)],2),e("div",{staticClass:"productDetail"},[e("el-dialog",{attrs:{title:"商品详情",visible:t.isShowDetailDlg,"close-on-click-modal":!1,width:"80%","before-close":t.handleClose}},[t.isShowDetailDlg?e("ai-product-detail",{attrs:{params:t.detailParams}}):t._e()],1)],1)],1)},x=[],S={name:"DetailPage",props:["params"],components:{AiProductDetail:g["default"],AiProductDropDown:f["default"]},data(){return{monitorId:"",content:"",search:{current:1,type:"1",size:120,orderBy:"",priceBegin:"",priceEnd:"",saleBegin:"",saleEnd:"",isNew:"",isOff:""},orderBys:[{value:"0",label:"按评论数涨辐排序"},{value:"1",label:"按价格涨辐排序"},{value:"2",label:"按评论数排序"},{value:"3",label:"按价格排序"},{value:"4",label:"按日均评论数排序"},{value:"5",label:"按近3次采集平均评论数排序"},{value:"6",label:"按近7次采集平均评论数排序"},{value:"7",label:"按近15次采集平均评论数排序"}],tableData:[],total:0,isShowDetailDlg:!1,detailParams:{}}},created(){this.$dict.load("mall_yesno"),this.monitorId=this.params.id,this.content=this.params.content,this.getList()},methods:{getList(){this.$http.post("/api/monitorDetail/myPageNew",null,{params:{monitorId:this.monitorId,...this.search}}).then((t=>{t.data.records=t.data.records.map((t=>(t.mallId="https://www.shein.com/store/home?store_code="+t.mallId,t))),this.tableData=t.data.records,this.total=t.data.total}))},cancel(t){this.$emit("change",{type:"List",isRefresh:!!t})},getPricePercent(t){return t<0?'<div style="display: inline; color: green">↓'+t+"%</div>":t>0?'<div style="display: inline; color: red">↑'+t+"%</div>":""},getSalePercent(t){return t<0?'<div style="display: inline; color: green">↓'+t+"%</div>":t>0?'<div style="display: inline; color: red">↑'+t+"%</div>":""},handleClose(){this.isShowDetailDlg=!1},goDetail(t,e){this.detailParams={goodsId:t,monitorId:e},this.isShowDetailDlg=!0}}},k=S,D=(a(61464),(0,d.A)(k,_,x,!1,null,"4bdafe0d",null)),$=D.exports,C={name:"StoreTrack",label:"店铺跟踪",components:{List:h,Detail:w,SheinDetail:$},data(){return{component:"List",params:{}}},methods:{onChange(t){"Detail"===t.type&&(this.component="Detail",this.params=t.params),"SheinDetail"===t.type&&(this.component="SheinDetail",this.params=t.params),"List"===t.type&&(this.component="List",this.params=t.params,this.$nextTick((()=>{t.isRefresh&&setTimeout((()=>{this.$refs.component.getList()}),600)})))}}},B=C,L=(0,d.A)(B,i,s,!1,null,"2056f33e",null),I=L.exports},55029:function(t,e,a){"use strict";a.r(e);var i=a(31601),s=a.n(i),l=a(76314),o=a.n(l),r=o()(s());r.push([t.id,'.productDetail[data-v-c7e6880a] .el-dialog{height:78vh;overflow:auto}.time[data-v-c7e6880a]{font-size:13px;color:#999}.bottom[data-v-c7e6880a]{margin-top:13px;line-height:12px}.button[data-v-c7e6880a]{padding:0;float:right}.image[data-v-c7e6880a]{width:100%;display:block}.clearfix[data-v-c7e6880a]:after,.clearfix[data-v-c7e6880a]:before{display:table;content:""}.clearfix[data-v-c7e6880a]:after{clear:both}.el-dropdown-link[data-v-c7e6880a]{cursor:pointer;color:#409eff}.el-icon-arrow-down[data-v-c7e6880a]{font-size:12px}.labelBadge[data-v-c7e6880a]{position:relative}.ii[data-v-c7e6880a]{background:red;border-radius:50%;width:20px;height:20px;top:-3px;right:-5px;position:absolute;text-align:center;color:#fff;z-index:999;font-size:14px}.img-box[data-v-c7e6880a]{display:flex;justify-content:center;align-items:center;position:relative}.img-box .icon-box[data-v-c7e6880a]{position:absolute;top:35%}.mask[data-v-c7e6880a]{background-color:#000}.mask[data-v-c7e6880a],.mask .el-image__inner[data-v-c7e6880a]{opacity:.6}[data-v-c7e6880a] .mask>img{opacity:.6}.el-icon[data-v-c7e6880a]{display:inline-block}',""]),e["default"]=r},8066:function(t,e,a){"use strict";a.r(e);var i=a(31601),s=a.n(i),l=a(76314),o=a.n(l),r=o()(s());r.push([t.id,'.productDetail[data-v-4bdafe0d] .el-dialog{height:78vh;overflow:auto}.time[data-v-4bdafe0d]{font-size:13px;color:#999}.bottom[data-v-4bdafe0d]{margin-top:13px;line-height:12px}.button[data-v-4bdafe0d]{padding:0;float:right}.image[data-v-4bdafe0d]{width:100%;display:block}.clearfix[data-v-4bdafe0d]:after,.clearfix[data-v-4bdafe0d]:before{display:table;content:""}.clearfix[data-v-4bdafe0d]:after{clear:both}.el-dropdown-link[data-v-4bdafe0d]{cursor:pointer;color:#409eff}.el-icon-arrow-down[data-v-4bdafe0d]{font-size:12px}.labelBadge[data-v-4bdafe0d]{position:relative}.ii[data-v-4bdafe0d]{background:red;border-radius:50%;width:20px;height:20px;top:-3px;right:-5px;position:absolute;text-align:center;color:#fff;z-index:999;font-size:14px}.img-box[data-v-4bdafe0d]{display:flex;justify-content:center;align-items:center;position:relative}.img-box .icon-box[data-v-4bdafe0d]{position:absolute;top:35%}.mask[data-v-4bdafe0d]{background-color:#000}.mask[data-v-4bdafe0d],.mask .el-image__inner[data-v-4bdafe0d]{opacity:.6}[data-v-4bdafe0d] .mask>img{opacity:.6}.el-icon[data-v-4bdafe0d]{display:inline-block}',""]),e["default"]=r},38819:function(t,e,a){var i=a(55029);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(99548).A;s("2e895f31",i,!0,{sourceMap:!1,shadowMode:!1})},61464:function(t,e,a){var i=a(8066);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(99548).A;s("9cc4abf6",i,!0,{sourceMap:!1,shadowMode:!1})},50865:function(t,e,a){"use strict";t.exports=a.p+"img/off.png"}}]);