(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[9733],{39733:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("AiDetail",{staticClass:"add-label",scopedSlots:e._u([{key:"title",fn:function(){return[t("ai-title",{attrs:{title:"添加模板",isShowBack:"",isShowBottomBorder:!0},on:{onBackClick:e.cancel},scopedSlots:e._u([{key:"center",fn:function(){return[t("label",[e._v("模板名称：")]),t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入模板名称",size:"small"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})]},proxy:!0},{key:"rightBtn",fn:function(){return[t("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.preview}},[e._v("预览")]),t("el-button",{attrs:{size:"small"},on:{click:e.print}},[e._v("打印")]),t("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.clearPaper}},[e._v("清空纸张")]),t("el-button",{attrs:{size:"small",type:"primary",loading:e.isLoading},on:{click:e.saveTemplate}},[e._v("保存")])]},proxy:!0}])})]},proxy:!0},{key:"content",fn:function(){return[t("ai-card",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"card",attrs:{title:"标签模板",hideTitle:!0},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"add-label__wrapper"},[t("Print",{ref:"printRef",attrs:{template:e.template,printData:e.printData,isPrint:!1,params:e.params}})],1)]},proxy:!0}])})]},proxy:!0}])})},r=[],s=a(15355),n={components:{Print:s.A},data(){return{name:"",template:{panels:[{index:0,name:1,height:200,width:200,paperHeader:0,paperFooter:547,printElements:[],paperNumberLeft:500,paperNumberTop:530,paperNumberDisabled:!0,paperNumberContinue:!0,fontFamily:"Microsoft YaHei",scale:1,watermarkOptions:{}}]},printData:{},id:"",info:{},params:[],isLoading:!1}},mounted(){this.printData={labelCode:123456789,productSkuId:"XXXXXXXXXXXXXX",skuExtCode:"XXXXXXXXXXXXXX",skuSpecName:"XXXXX"},this.$route.query.id&&(this.id=this.$route.query.id,this.getInfo())},methods:{cancel(){this.$router.go(-1)},getInfo(){this.isLoading=!0,this.$http.post(`/api/template/detail?id=${this.$route.query.id}`).then((e=>{0===e.code&&(this.info=e.data,this.name=e.data.name,this.params=JSON.parse(e.data.params),this.$nextTick((()=>{this.template=JSON.parse(e.data.content)}))),this.isLoading=!1}))},preview(){this.$refs.printRef.preview()},savePdf(){this.$refs.printRef.savePdf()},rotatePaper(){this.$refs.printRef.rotatePaper()},saveTemplate(){if(!this.name)return this.$message.error("模板名称不能为空");const e=this.$refs.printRef.save();this.isLoading=!0;const t=this.id?"/api/template/modify":"/api/template/addTemplate";this.$http.post(t,{name:this.name,codes:e.html,content:JSON.stringify(e.json),params:e.params,id:this.id||""}).then((e=>{0===e.code?(this.isLoading=!1,this.$message.success("模板创建成功"),this.cancel()):this.isLoading=!1}))},print(){this.$refs.printRef.print()},clearPaper(){this.$refs.printRef.clearPaper()}}},o=n,p=(a(35309),a(81656)),l=(0,p.A)(o,i,r,!1,null,"6e573698",null),d=l.exports},62755:function(e,t,a){"use strict";a.r(t);var i=a(31601),r=a.n(i),s=a(76314),n=a.n(s),o=n()(r());o.push([e.id,".add-label[data-v-6e573698] .ai-detail__content--wrapper{max-width:100%;height:100%;margin:0 20px}.add-label .card[data-v-6e573698]{height:100%;overflow:hidden}.add-label .card[data-v-6e573698] .ai-card__body{flex:1;height:100%}.add-label .card .add-label__wrapper[data-v-6e573698]{padding-bottom:20px}",""]),t["default"]=o},35309:function(e,t,a){var i=a(62755);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);var r=a(99548).A;r("265f7f93",i,!0,{sourceMap:!1,shadowMode:!1})}}]);