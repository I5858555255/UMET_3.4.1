(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[2968],{82968:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return h}});var r=function(){var t=this,e=t._self._c;return e("ai-list",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"list",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[e("ai-title",{attrs:{slot:"title",title:"商品列表",tips:"每页为100条商品数据",isShowBottomBorder:""},slot:"title",scopedSlots:t._u([{key:"rightBtn",fn:function(){return[e("div",{staticClass:"title-right"},[e("div",[e("label",{staticStyle:{width:"90px"}},[t._v("店铺：")]),e("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.form.mallId,callback:function(e){t.$set(t.form,"mallId",e)},expression:"form.mallId"}},t._l(t.$store.state.mallList,(function(t){return e("el-option",{key:t.mallId,attrs:{label:t.mallName,value:t.mallId}})})),1)],1)])]},proxy:!0}])}),e("template",{slot:"content"},[e("div",{staticClass:"content"},[e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("div",{staticClass:"search-item"},[e("label",[t._v("起始页：")]),e("el-input",{attrs:{size:"small",placeholder:"请输入起始页",type:"number"},model:{value:t.startPage,callback:function(e){t.startPage=e},expression:"startPage"}})],1),e("div",{staticClass:"search-item"},[e("label",[t._v("结束页：")]),e("el-input",{attrs:{size:"small",placeholder:"请输入起始页",type:"number"},model:{value:t.endPage,callback:function(e){t.endPage=e},expression:"endPage"}})],1),e("div",{staticClass:"search-item"},[e("label",[t._v("是否在售：")]),e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.reqData.skcSiteStatus,callback:function(e){t.$set(t.reqData,"skcSiteStatus",e)},expression:"reqData.skcSiteStatus"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"search-item"},[e("label",[t._v("站点：")]),e("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.reqData.bindSiteId,callback:function(e){t.$set(t.reqData,"bindSiteId",e)},expression:"reqData.bindSiteId"}},t._l(t.siteList,(function(t){return e("el-option",{key:t.siteId,attrs:{label:t.siteName,value:t.siteId}})})),1)],1),e("div",{staticClass:"search-item"},[e("label",[t._v("合规下架风险：")]),e("el-select",{attrs:{multiple:"",placeholder:"请选择",size:"small"},model:{value:t.reqData.certPunishTypes,callback:function(e){t.$set(t.reqData,"certPunishTypes",e)},expression:"reqData.certPunishTypes"}},t._l(t.certPunishTypes,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("div",{staticClass:"search-item"},[e("label",[t._v("资质上传状态：")]),e("el-select",{attrs:{multiple:"",placeholder:"请选择",size:"small"},model:{value:t.reqData.productCertAuditStatuses,callback:function(e){t.$set(t.reqData,"productCertAuditStatuses",e)},expression:"reqData.productCertAuditStatuses"}},t._l(t.productCertAuditStatusList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("div",{staticClass:"search-item"},[e("label",[t._v("商品名称：")]),e("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入商品名称"},model:{value:t.reqData.productName,callback:function(e){t.$set(t.reqData,"productName",e)},expression:"reqData.productName"}})],1),e("div",{staticClass:"search-item"},[e("label",[t._v("库存起始值：")]),e("el-input",{attrs:{size:"small",placeholder:"请输入库存起始值",type:"number"},model:{value:t.reqData.jitStockQuantitySection.leftValue,callback:function(e){t.$set(t.reqData.jitStockQuantitySection,"leftValue",e)},expression:"reqData.jitStockQuantitySection.leftValue"}})],1),e("div",{staticClass:"search-item"},[e("label",[t._v("库存结束值：")]),e("el-input",{attrs:{size:"small",placeholder:"请输入库存结束值",type:"number"},model:{value:t.reqData.jitStockQuantitySection.rightValue,callback:function(e){t.$set(t.reqData.jitStockQuantitySection,"rightValue",e)},expression:"reqData.jitStockQuantitySection.rightValue"}})],1)]},proxy:!0},{key:"right",fn:function(){return[e("el-button",{attrs:{type:"primary"},on:{click:t.toLoad}},[t._v("加载")])]},proxy:!0}])}),e("ai-card",{staticStyle:{"padding-bottom":"40px"},attrs:{title:"数据明细"},scopedSlots:t._u([{key:"right",fn:function(){return[e("json-excel",{attrs:{data:t.tableData,fields:t.jsonFields,name:"商品列表.xls",worksheet:"商品列表"}},[e("el-button",{attrs:{type:"primary",disabled:0==t.tableData.length}},[t._v("下载数据")])],1)]},proxy:!0}])},[e("ai-table",{staticStyle:{"margin-top":"8px"},attrs:{isShowPagination:!1,tableData:t.tableData,"col-configs":t.colConfigs,total:t.tableData.length,height:"500"},on:{getList:()=>{}}},[e("el-table-column",{attrs:{slot:"productName",width:"200px","show-overflow-tooltip":!0,label:"商品名称",fixed:"left"},slot:"productName",scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-image",{staticClass:"image",staticStyle:{width:"40px",height:"40px"},attrs:{src:a.row.mainImageUrl,"preview-src-list":[a.row.mainImageUrl]}}),t._v(" "+t._s(a.row.productName)+" ")],1)]}}])})],1)],1)],1)])],2)},i=[],s=(a(44114),a(98992),a(54520),a(81454),a(31052)),l=a(73236),o=a(31981),n=a(39325),d={name:"MyNormalOrder",data(){return{form:{mallId:""},startPage:1,endPage:10,reqData:{productName:"",page:1,pageSize:100,skcSiteStatus:"",bindSiteId:"",certPunishTypes:[],productCertAuditStatuses:[],jitStockQuantitySection:{leftValue:"",rightValue:""}},options:[{label:"是",value:1},{label:"否",value:0}],colConfigs:[{slot:"productName",label:"商品名称",width:"180px",align:"left",fixed:"left"},{prop:"category",label:"分类",width:"140px",align:"left",fixed:"left"},{prop:"productId",label:"SPU ID",width:"120px",align:"left"},{prop:"productSkcId",label:"SKC ID",width:"120px",align:"left"},{prop:"productSkuId",label:"SKU ID",width:"120px",align:"left"},{prop:"skcSiteStatus",label:"是否在售",width:"120px",align:"left"},{prop:"extCode",label:"SKC货号",width:"100px",align:"left"},{prop:"skuExtCode",label:"SKU货号",width:"160px",align:"left"},{prop:"specName",label:"SKU属性",width:"100px",align:"left"},{prop:"skuStockQuantity",label:"库存",width:"100px",align:"left"},{prop:"productCertAuditStatus",label:"资质上传状态",width:"120px",align:"left"},{prop:"certPunishType",label:"合规下架风险",width:"120px",align:"left"},{prop:"supplierPrice",label:"申报价格",width:"180px",align:"left"},{prop:"todaySalesVolume",label:"今日销量",width:"100px",align:"left"},{prop:"createdAt",label:"上架时间",width:"160px",align:"left"}],isLoading:!1,tableData:[],jsonFields:{"商品名称":"productName","图片":"mainImageUrl","分类":"category","SPU ID":"productId","SKC ID":"productSkcId","SKU ID":"productSkuId","是否在售":"skcSiteStatus","SKC货号":"extCode","SKU货号":"skuExtCode","SKU属性":"specName","库存":"skuStockQuantity","资质上传状态":"productCertAuditStatus","合规下架风险":"certPunishType","申报价格":"supplierPrice","今日销量":"todaySalesVolume","上架时间":"createdAt"},certPunishTypes:[{id:1,name:"已经处罚"},{id:2,name:"即将下架"},{id:3,name:"下架风险预警"}],productCertAuditStatusList:[{id:1,name:"待上传"},{id:2,name:"上传中"},{id:3,name:"上传失败"},{id:4,name:"上传成功"}],currentIndex:0,siteList:[]}},components:{JsonExcel:n.A},created(){this.getSiteList()},methods:{async getSiteList(){let t=await(0,l.w4)({url:"bg-visage-mms/config/common/site/query",needMallId:!0,mallId:this.$store.state.mallList[0].mallId,data:{}});t.success&&1e6==t.errorCode&&(this.siteList=t.result.siteBaseList.filter((t=>t.matchSemiManaged)))},beforeGetList(){this.$userCheck(this.form.mallId).then((()=>{this.toLoad()})).catch((t=>{this.form.mallId=""}))},toLoad(){this.form.mallId?!this.startPage||this.startPage<1?s.Message.error("起始页不能为空，且不能小于1"):!this.endPage||this.startPage<1?s.Message.error("结束页不能为空"):this.startPage>this.endPage?s.Message.error("起始页不能大于结束页"):(this.reqData.page=this.startPage,this.tableData=[],this.currentIndex=0,this.isLoading=!0,this.load()):s.Message.error("请选择店铺")},load(){(0,l.w4)({url:"bg-visage-mms/product/skc/pageQuery",needMallId:!0,mallId:this.form.mallId,anti:!0,data:this.reqData}).then((t=>{if(1e6==t.errorCode){for(let e=0;e<t.result.pageItems.length;e++){let a=t.result.pageItems[e],r={};r.productName=a.productName,r.mainImageUrl=a.mainImageUrl,r.productId=a.productId,r.productSkcId=a.productSkcId,r.skcSiteStatus="1"==a.skcSiteStatus?"在售":"",r.createdAt=(0,o.z)(a.createdAt),r.extCode=a.extCode,r.productCertAuditStatus="-",1==a.productCertAuditStatus?r.productCertAuditStatus="待上传":2==a.productCertAuditStatus?r.productCertAuditStatus="上传中":3==a.productCertAuditStatus?r.productCertAuditStatus="上传失败":4==a.productCertAuditStatus&&(r.productCertAuditStatus="上传成功"),r.certPunishType="-",1==a.productCertPunish?.certPunishType?r.certPunishType="已经处罚":2==a.productCertPunish?.certPunishType?r.certPunishType="即将下架":3==a.productCertPunish?.certPunishType&&(r.certPunishType="下架风险预警"),r.category="";for(let t=1;t<11;t++){if(!a.categories["cat"+t].catName)break;r.category+="->"+a.categories["cat"+t].catName}r.category=r.category.substring(2);for(let t=0;t<a.productSkuSummaries.length;t++){let e=a.productSkuSummaries[t].productSkuSpecList.map((t=>t.parentSpecName+"："+t.specName)),i="-";a.productSkuSummaries[t].productSkuSemiManagedStock&&(i=a.productSkuSummaries[t].productSkuSemiManagedStock.skuStockQuantity),r={...r,productSkuId:a.productSkuSummaries[t].productSkuId,skuExtCode:a.productSkuSummaries[t].extCode,supplierPrice:a.productSkuSummaries[t].supplierPrice/100||a.productSkuSummaries[t].siteSupplierPrices[0].supplierPrice/100,specName:e.join("，"),skuStockQuantity:i,todaySalesVolume:a.productSkuSummaries[t].todaySalesVolume},this.tableData.push(r)}}t.result.pageItems.length==this.reqData.pageSize&&this.reqData.page<this.endPage?(this.reqData.page++,this.load()):this.isLoading=!1}}))}}},u=d,c=(a(97824),a(81656)),p=(0,c.A)(u,r,i,!1,null,"59df353e",null),h=p.exports},85554:function(t,e,a){"use strict";a.r(e);var r=a(31601),i=a.n(r),s=a(76314),l=a.n(s),o=l()(i());o.push([t.id,".list .title-right[data-v-59df353e]{display:flex;align-items:center}.list .title-right>div[data-v-59df353e]:first-child{margin-right:20px}.list[data-v-59df353e].ai-list .ai-list__content--right-wrapper{background:transparent;box-shadow:none;padding:0!important}",""]),e["default"]=o},39325:function(t,e,a){"use strict";"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof a.g?a.g:"undefined"!==typeof self&&self;function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}var i=r((function(t,e){(function(e,a){t.exports=a()})(0,(function(){return function t(e,a,r){var i,s,l=window,o="application/octet-stream",n=r||o,d=e,u=!a&&!r&&d,c=document.createElement("a"),p=function(t){return String(t)},h=l.Blob||l.MozBlob||l.WebKitBlob||p,f=a||"download";if(h=h.call?h.bind(l):Blob,"true"===String(this)&&(d=[d,n],n=d[0],d=d[1]),u&&u.length<2048&&(f=u.split("/").pop().split("?")[0],c.href=u,-1!==c.href.indexOf(u))){var m=new XMLHttpRequest;return m.open("GET",u,!0),m.responseType="blob",m.onload=function(e){t(e.target.response,f,o)},setTimeout((function(){m.send()}),0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(d)){if(!(d.length>2096103.424&&h!==p))return navigator.msSaveBlob?navigator.msSaveBlob(y(d),f):x(d);d=y(d),n=d.type||o}else if(/([\x80-\xff])/.test(d)){var g=0,S=new Uint8Array(d.length),b=S.length;for(g;g<b;++g)S[g]=d.charCodeAt(g);d=new h([S],{type:n})}function y(t){var e=t.split(/[:;,]/),a=e[1],r="base64"==e[2]?atob:decodeURIComponent,i=r(e.pop()),s=i.length,l=0,o=new Uint8Array(s);for(l;l<s;++l)o[l]=i.charCodeAt(l);return new h([o],{type:a})}function x(t,e){if("download"in c)return c.href=t,c.setAttribute("download",f),c.className="download-js-link",c.innerHTML="downloading...",c.style.display="none",document.body.appendChild(c),setTimeout((function(){c.click(),document.body.removeChild(c),!0===e&&setTimeout((function(){l.URL.revokeObjectURL(c.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,o)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var a=document.createElement("iframe");document.body.appendChild(a),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,o)),a.src=t,setTimeout((function(){document.body.removeChild(a)}),333)}if(i=d instanceof h?d:new h([d],{type:n}),navigator.msSaveBlob)return navigator.msSaveBlob(i,f);if(l.URL)x(l.URL.createObjectURL(i),!0);else{if("string"===typeof i||i.constructor===p)try{return x("data:"+n+";base64,"+l.btoa(i))}catch(v){return x("data:"+n+","+encodeURIComponent(i))}s=new FileReader,s.onload=function(t){x(this.result)},s.readAsDataURL(i)}return!0}}))})),s={props:{type:{type:String,default:"xls"},data:{type:Array,required:!1,default:null},fields:{type:Object,default:()=>null},exportFields:{type:Object,default:()=>null},defaultValue:{type:String,required:!1,default:""},header:{default:null},footer:{default:null},name:{type:String,default:"data.xls"},fetch:{type:Function},meta:{type:Array,default:()=>[]},worksheet:{type:String,default:"Sheet1"},beforeGenerate:{type:Function},beforeFinish:{type:Function},escapeCsv:{type:Boolean,default:!0},stringifyLongNum:{type:Boolean,default:!1}},computed:{idName(){var t=(new Date).getTime();return"export_"+t},downloadFields(){return this.fields?this.fields:this.exportFields?this.exportFields:void 0}},methods:{async generate(){"function"===typeof this.beforeGenerate&&await this.beforeGenerate();let t=this.data;if("function"!==typeof this.fetch&&t||(t=await this.fetch()),!t||!t.length)return;let e=this.getProcessedJson(t,this.downloadFields);return"html"===this.type?this.export(this.jsonToXLS(e),this.name.replace(".xls",".html"),"text/html"):"csv"===this.type?this.export(this.jsonToCSV(e),this.name.replace(".xls",".csv"),"application/csv"):this.export(this.jsonToXLS(e),this.name,"application/vnd.ms-excel")},export:async function(t,e,a){let r=this.base64ToBlob(t,a);"function"===typeof this.beforeFinish&&await this.beforeFinish(),i(r,e,a)},jsonToXLS(t){let e='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta name=ProgId content=Excel.Sheet> <meta name=Generator content="Microsoft Excel 11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>${worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>br {mso-data-placement: same-cell;}</style></head><body><table>${table}</table></body></html>',a="<thead>";const r=Object.keys(t[0]).length;let i=this;const s=this.header||this.$attrs.title;s&&(a+=this.parseExtraData(s,'<tr><th colspan="'+r+'">${data}</th></tr>')),a+="<tr>";for(let l in t[0])a+="<th>"+l+"</th>";return a+="</tr>",a+="</thead>",a+="<tbody>",t.map((function(t,e){a+="<tr>";for(let r in t)a+="<td>"+i.preprocessLongNum(i.valueReformattedForMultilines(t[r]))+"</td>";a+="</tr>"})),a+="</tbody>",null!=this.footer&&(a+="<tfoot>",a+=this.parseExtraData(this.footer,'<tr><td colspan="'+r+'">${data}</td></tr>'),a+="</tfoot>"),e.replace("${table}",a).replace("${worksheet}",this.worksheet)},jsonToCSV(t){let e=this;var a=[];const r=this.header||this.$attrs.title;r&&a.push(this.parseExtraData(r,"${data}\r\n"));for(let i in t[0])a.push(i),a.push(",");return a.pop(),a.push("\r\n"),t.map((function(t){for(let r in t){let i=t[r]+"";e.escapeCsv&&(i='="'+i+'"',i.match(/[,"\n]/)&&(i='"'+i.replace(/\"/g,'""')+'"')),a.push(i),a.push(",")}a.pop(),a.push("\r\n")})),null!=this.footer&&a.push(this.parseExtraData(this.footer,"${data}\r\n")),a.join("")},getProcessedJson(t,e){let a=this.getKeys(t,e),r=[],i=this;return t.map((function(t,e){let s={};for(let r in a){let e=a[r];s[r]=i.getValue(e,t)}r.push(s)})),r},getKeys(t,e){if(e)return e;let a={};for(let r in t[0])a[r]=r;return a},parseExtraData(t,e){let a="";if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&(a+=e.replace("${data}",t[r]));else a+=e.replace("${data}",t);return a},getValue(t,e){const a="object"!==typeof t?t:t.field;let r="string"!==typeof a?[]:a.split("."),i=this.defaultValue;return i=a?r.length>1?this.getValueFromNestedItem(e,r):this.parseValue(e[a]):e,t.hasOwnProperty("callback")&&(i=this.getValueFromCallback(i,t.callback)),i},valueReformattedForMultilines(t){return"string"==typeof t?t.replace(/\n/gi,"<br/>"):t},preprocessLongNum(t){if(this.stringifyLongNum){if(String(t).startsWith("0x"))return t;if(!isNaN(t)&&""!=t&&(t>99999999999||t<1e-13))return'="'+t+'"'}return t},getValueFromNestedItem(t,e){let a=t;for(let r of e)a&&(a=a[r]);return this.parseValue(a)},getValueFromCallback(t,e){if("function"!==typeof e)return this.defaultValue;const a=e(t);return this.parseValue(a)},parseValue(t){return t||0===t||"boolean"===typeof t?t:this.defaultValue},base64ToBlob(t,e){let a=window.btoa(window.unescape(encodeURIComponent(t))),r=atob(a),i=r.length,s=new Uint8ClampedArray(i);while(i--)s[i]=r.charCodeAt(i);return new Blob([s],{type:e})}}};function l(t,e,a,r,i,s,l,o,n,d){"boolean"!==typeof l&&(n=o,o=l,l=!1);var u,c="function"===typeof a?a.options:a;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),r&&(c._scopeId=r),s?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,n(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=u):e&&(u=l?function(){e.call(this,d(this.$root.$options.shadowRoot))}:function(t){e.call(this,o(t))}),u)if(c.functional){var p=c.render;c.render=function(t,e){return u.call(e),p(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return a}var o=l;const n=s;var d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:t.idName},on:{click:t.generate}},[t._t("default",[t._v(" Download "+t._s(t.name)+" ")])],2)},u=[];d._withStripped=!0;const c=void 0,p=void 0,h=void 0,f=!1;var m=o({render:d,staticRenderFns:u},c,n,p,f,h,void 0,void 0);e.A=m},97824:function(t,e,a){var r=a(85554);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var i=a(99548).A;i("31377918",r,!0,{sourceMap:!1,shadowMode:!1})}}]);