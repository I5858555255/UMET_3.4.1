(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[8445],{18445:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("ai-list",{staticClass:"Template"},[e("ai-title",{attrs:{slot:"title",title:"模板管理",isShowBottomBorder:""},slot:"title",scopedSlots:t._u([{key:"rightBtn",fn:function(){return[e("div",{staticClass:"tips",class:[t.$store.state.labelInfo.isExpires?"active":""],attrs:{slot:"rightBtn"},slot:"rightBtn"},[e("p",[t._v("有效期："+t._s(t.$store.state.labelInfo.expireTime))]),e("p",[t._v("已使用SKU数："+t._s(t.$store.state.labelInfo.skuUsed)+"/"+t._s(t.$store.state.labelInfo.skuTotal))])])]},proxy:!0}])}),e("template",{slot:"content"},[e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("div",{staticClass:"search-item"},[e("label",[t._v("SKU：")]),e("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",clearable:"",placeholder:"请输入SKU","suffix-icon":"iconfont iconSearch"},model:{value:t.search.productSkuId,callback:function(e){t.$set(t.search,"productSkuId",e)},expression:"search.productSkuId"}})],1),e("div",{staticClass:"search-item"},[e("label",[t._v("SKC：")]),e("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入SKC",clearable:"","suffix-icon":"iconfont iconSearch"},model:{value:t.search.productSkcId,callback:function(e){t.$set(t.search,"productSkcId",e)},expression:"search.productSkcId"}})],1),e("div",{staticClass:"search-item"},[e("label",[t._v("模板名称：")]),e("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入模板名称",clearable:"","suffix-icon":"iconfont iconSearch"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),e("el-button",{attrs:{type:"primary",size:"small",loading:t.isLoading},on:{click:t.getList}},[t._v("查询")])]},proxy:!0}])}),e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("el-button",{staticClass:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(e){return t.toAdd("")}}},[t._v("添加")])]},proxy:!0}])}),e("ai-table",{staticStyle:{"margin-top":"8px"},attrs:{tableData:t.tableData,"col-configs":t.colConfigs,total:t.total,current:t.search.current,size:t.search.size,loading:t.isLoading},on:{"update:current":function(e){return t.$set(t.search,"current",e)},"update:size":function(e){return t.$set(t.search,"size",e)},getList:t.getList}},[e("el-table-column",{attrs:{slot:"options",label:"操作",align:"center",fixed:"right",width:"240px"},slot:"options",scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",{staticClass:"table-options"},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.toAddSku(a.id)}}},[t._v("管理SKU")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.toAdd(a.id)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.remove(a.id)}}},[t._v("删除")])],1)]}}])})],1),e("Print",{ref:"printRef",attrs:{isPrint:!0}})],1)],2)},i=[],o=(a(44114),a(15355)),n={name:"PringTemplate",components:{Print:o.A},data(){return{colConfigs:[{prop:"name",label:"模板名称",align:"left"},{prop:"skuTotal",label:"绑定SKU数量",align:"center"},{prop:"createTime",label:"创建时间",align:"center"}],isLoading:!1,tableData:[],total:0,search:{current:1,size:10,name:"",productSkuId:"",productSkcId:""}}},created(){this.getList()},methods:{toAdd(t=""){this.$router.push(`/addLabelsTemplate?id=${t}`)},savePDF(t){this.isLoading=!0,this.$http.post(`/api/template/detail?id=${t}`).then((e=>{if(0===e.code){const a=JSON.parse(e.data.content);this.$http.post(`/api/templateSku/getMySkuPage?size=-1&templateId=${t}`).then((t=>{if(0===t.code){const e=this.$refs.printRef.toPrint(a,t.data.records);console.log(e),this.isLoading=!1}}))}}))},toAddSku(t){this.$router.push(`/skuManage?id=${t}`)},getList(){this.isLoading=!0,this.$http.post("/api/template/myTemplate",null,{params:{...this.search}}).then((t=>{0===t.code&&(this.tableData=t.data.records,this.total=t.data.total),this.isLoading=!1}))},remove(t){this.$confirm("确定删除该模板？","温馨提示",{type:"warning"}).then((()=>{this.$http.post(`/api/template/removeById?id=${t}`).then((t=>{0==t.code&&(this.$message.success("删除成功"),this.getList())}))}))},onConfirm(){}}},l=n,r=(a(68406),a(81656)),c=(0,r.A)(l,s,i,!1,null,"c310d224",null),d=c.exports},35608:function(t,e,a){"use strict";a.r(e);var s=a(31601),i=a.n(s),o=a(76314),n=a.n(o),l=n()(i());l.push([t.id,".Template .search-item[data-v-c310d224]{margin-bottom:0}.Template .tips[data-v-c310d224]{display:flex;align-items:center;color:green}.Template .tips.active[data-v-c310d224]{color:red}.Template .tips p[data-v-c310d224]{font-size:15px;font-weight:600}.Template .tips p[data-v-c310d224]:first-child{margin-right:20px}",""]),e["default"]=l},68406:function(t,e,a){var s=a(35608);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(99548).A;i("ac8f627a",s,!0,{sourceMap:!1,shadowMode:!1})}}]);