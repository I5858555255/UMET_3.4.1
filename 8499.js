(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[8499],{18499:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return f}});var i=function(){var t=this,e=t._self._c;return e("div",[e("ai-list",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"list",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[e("ai-title",{attrs:{slot:"title",title:"VPN购买",isShowBottomBorder:""},slot:"title",scopedSlots:t._u([{key:"rightBtn",fn:function(){return[e("div",{staticClass:"title-right"},[e("div",[e("a",{staticStyle:{color:"white"},attrs:{href:"http://temu.jjcp52.com/dist/doc/temu-vpn-doc.pdf",target:"_blank"}},[e("el-button",{class:"el-button el-button--primary",attrs:{type:"button"}},[t._v("使用教程")])],1)])])]},proxy:!0}])}),e("template",{slot:"content"},[e("div",{staticStyle:{"margin-bottom":"5px"}},[e("el-alert",{attrs:{title:"本VPN仅用于跨境电商，不得用于违法用途，一经发现必将追究责任。",type:"error",closable:!1}})],1),e("div",{staticClass:"content"},[e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("div",{staticClass:"search-item"},[e("label",[t._v("状态：")]),e("ai-select",{attrs:{selectList:t.$dict.getDict("vpn_status"),size:"small"},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}})],1)]},proxy:!0}])}),e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("el-button",{class:"el-button el-button--danger",attrs:{type:"button"},on:{click:function(e){t.currIndex=null,t.qrcode=null,t.buyVpnDlgShow=!0}}},[t._v("购买")])]},proxy:!0},{key:"right",fn:function(){return[e("el-button",{class:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(e){return t.toLoad()}}},[t._v("查询")])]},proxy:!0}])}),e("ai-card",{staticStyle:{"padding-bottom":"40px"},attrs:{title:"已购买列表"}},[e("ai-table",{staticStyle:{"margin-top":"8px"},attrs:{tableData:t.tableData,"col-configs":t.colConfigs,total:t.total,current:t.search.current,size:t.search.size,height:"500"},on:{"update:current":function(e){return t.$set(t.search,"current",e)},"update:size":function(e){return t.$set(t.search,"size",e)},getList:()=>{}}},[e("el-table-column",{attrs:{slot:"vpnUrl","show-overflow-tooltip":!0,label:"VPN地址"},slot:"vpnUrl",scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("div",[e("span",{staticStyle:{"margin-right":"30px"}},[t._v(t._s(a.row.vpnUrl))])]),e("div",{staticStyle:{float:"right"}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制",placement:"bottom"}},[e("i",{staticClass:"el-icon-document-copy",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.toCopyUrl(a.row)}}})]),t._v("  "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看二维码",placement:"bottom"}},[e("svg",{staticStyle:{cursor:"pointer"},attrs:{viewBox:"64 64 896 896","data-icon":"qrcode",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},on:{click:function(e){return t.openQrCode(a.row)}}},[e("path",{attrs:{d:"M468 128H160c-17.7 0-32 14.3-32 32v308c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V136c0-4.4-3.6-8-8-8zm-56 284H192V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210H136c-4.4 0-8 3.6-8 8v308c0 17.7 14.3 32 32 32h308c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zm-56 284H192V612h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm590-630H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V160c0-17.7-14.3-32-32-32zm-32 284H612V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210h-48c-4.4 0-8 3.6-8 8v134h-78V556c0-4.4-3.6-8-8-8H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h78v102c0 4.4 3.6 8 8 8h190c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zM746 832h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm142 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}})])])],1)])]}}])}),e("el-table-column",{attrs:{slot:"useTotalGb","show-overflow-tooltip":!0,label:"已使用容量(GB)"},slot:"useTotalGb",scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[null==a.row.useTotalGb?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看已使用容量",placement:"bottom"}},[e("i",{staticClass:"el-icon-view",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.showTotalGB(a.row)}}})]):e("span",[t._v(t._s(a.row.useTotalGb))])],1)]}}])})],1)],1)],1)])],2),e("ai-dialog",{attrs:{title:"VPN购买",visible:t.buyVpnDlgShow,"close-on-click-modal":!1,width:"790px",customFooter:""},on:{"update:visible":function(e){t.buyVpnDlgShow=e},close:t.handleClose}},[e("div",{staticClass:"middle"},[e("div",{staticClass:"middle-top"},[e("div",{staticClass:"tab-content"},[e("div",{staticClass:"tab-content__item--wrapper"},t._l(t.priceList,(function(a,i){return e("div",{key:i,staticClass:"tab-content__item",class:[t.currIndex===i?"active":""],on:{click:function(e){t.currIndex=i,t.getQrcode(a)}}},[e("div",{staticClass:"price"},[e("i",[t._v("¥")]),e("span",[t._v(t._s(a.price))])]),e("div",{staticClass:"original-price"},[e("i",[t._v("¥")]),e("span",[t._v(t._s(a.originPrice))])]),e("div",[e("span",[t._v(t._s(a.title))])])])})),0)])])]),e("div",{staticClass:"title"},[t._v("支付方式")]),e("div",{staticClass:"bottom"},[e("div",{staticClass:"bottom-left"},[e("div",{staticClass:"code"},[t.qrcode?e("vue-qr",{attrs:{text:t.qrcode,size:110,margin:0,logoSrc:t.wechatLogo}}):t._e()],1),e("div",{staticClass:"paytype"},[e("svg",{attrs:{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M12.11 0H.89A.89.89 0 0 0 0 .89v11.22c0 .491.399.89.89.89h11.22a.89.89 0 0 0 .89-.89V.89a.89.89 0 0 0-.89-.89zM6.5 10.65a5.592 5.592 0 0 1-1.848-.311c-.364.241-.975.639-1.215.75-.352.162-.25-.188-.25-.188L3.395 9.7C2.24 8.895 1.499 7.654 1.499 6.26c0-2.426 2.239-4.392 5-4.392 1.693 0 3.188.74 4.093 1.869l-4.905 2.27s-.4.152-.75-.062c-.35-.213-.813-.564-.813-.564s-.538-.458-.25.376l.751 1.756s.089.524.687.189c.468-.262 4.103-2.454 5.666-3.397a3.94 3.94 0 0 1 .523 1.954c0 2.425-2.239 4.391-5.001 4.391z",fill:"#09BB07","fill-rule":"nonzero"}})]),e("span",[t._v("微信支付")])])]),e("div",{staticClass:"bottom-right"},[e("div",{staticClass:"right-price"},[e("i",[t._v("¥")]),e("span",{staticClass:"price"},[t._v(t._s(t.currGoods.price||""))])])])]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.buyVpnDlgShow=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.buyVpnDlgShow=!1,t.toLoad()}}},[t._v("我已支付")])],1)]),e("ai-dialog",{attrs:{title:"VPN二维码",visible:t.qrcodeShow,"close-on-click-modal":!1,width:"400px",customFooter:""},on:{"update:visible":function(e){t.qrcodeShow=e},close:t.handleClose}},[t.vpnQrcode?e("vue-qr",{attrs:{text:t.vpnQrcode,size:300,margin:0}}):t._e(),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.qrcodeShow=!1}}},[t._v("关 闭")])],1)],1)],1)},o=[],l=(a(81454),a(10644)),n=a.n(l),s=a(31052),c={name:"Vpn",components:{VueQr:n()},data(){return{search:{current:1,size:10,status:null},colConfigs:[{prop:"orderNo",label:"订单号",align:"left"},{prop:"totalGb",label:"容量(GB)",align:"left"},{slot:"useTotalGb",label:"已使用容量(GB)",align:"left"},{slot:"vpnUrl",label:"VPN地址",align:"left"},{prop:"status",label:"状态",align:"left",format:t=>this.$dict.getLabel("vpn_status",t)},{prop:"expireTime",label:"失效时间",align:"left"},{prop:"createTime",label:"购买时间",align:"left"}],isLoading:!1,tableData:[],total:0,priceList:[],buyVpnDlgShow:!1,currIndex:null,qrcode:null,qrcodeShow:!1,vpnQrcode:null}},computed:{wechatLogo:()=>a(53490),currGoods(){return this.priceList.length?null==this.currIndex?{}:this.priceList[this.currIndex]:{}}},created(){this.$dict.load("vpn_status"),this.toLoad(),this.getPriceList()},methods:{toLoad(){this.tableData=[],this.search.current=1,this.load()},load(){this.$http.post("/api/vpn/myPage",null,{params:{...this.search}}).then((t=>{this.tableData=t.data.records,this.tableData.map((t=>{t.useTotalGb=null})),this.total=t.data.total}))},getPriceList(){this.$http.post("/api/priceConfig/page?module=3").then((t=>{0===t.code&&(this.priceList=t.data.records)}))},getQrcode(t,e){this.$http.post("/api/order/createOrder",null,{params:{priceConfigId:t.id}}).then((t=>{if(t?.data?.id)return t.data.id})).then((t=>this.$http.post(`/api/order/createPrepayOrder?id=${t}`))).then((t=>{t?.data&&(this.qrcode=t.data.codeUrl)}))},handleClose(){this.buyVpnDlgShow=!1},openQrCode(t){this.qrcodeShow=!0,this.vpnQrcode=t.vpnUrl},async toCopyUrl(t){await navigator.clipboard.writeText(t.vpnUrl),s.Message.success("复制成功")},async showTotalGB(t){this.isLoading=!0;let e=await this.$http.post(`/api/vpn/useCapacity?id=${t.id}`);if(0==e.code)for(let a=0;a<this.tableData.length;a++)if(this.tableData[a].id==t.id){let t={...this.tableData[a]};t.useTotalGb=e.data,this.tableData.splice(a,1,t);break}this.isLoading=!1}}},r=c,d=(a(27302),a(81656)),p=(0,d.A)(r,i,o,!1,null,"6fac57e8",null),f=p.exports},24512:function(t,e,a){"use strict";a.r(e);var i=a(31601),o=a.n(i),l=a(76314),n=a.n(l),s=n()(o());s.push([t.id,".list .title-right[data-v-6fac57e8]{display:flex;align-items:center}.list .title-right>div[data-v-6fac57e8]:first-child{margin-right:20px}.list[data-v-6fac57e8].ai-list .ai-list__content--right-wrapper{background:transparent;box-shadow:none;padding:0!important}.list .title[data-v-6fac57e8]{margin:20px 0 10px 40px;font-size:16px;text-align:left;font-weight:600;color:#2a2b2e;font-weight:400}.middle[data-v-6fac57e8]{padding-bottom:20px;border-radius:20px;overflow:hidden;background-color:#fff;box-shadow:0 0 20px 0 hsla(0,39%,56%,.1),0 0 16px 0 rgba(0,0,0,.08)}.middle .middle-top[data-v-6fac57e8]{flex:1;padding:0 0}.middle .middle-top .tab-content[data-v-6fac57e8]{display:flex;flex-direction:column;padding:0 40px}.middle .middle-top .tab-content .title[data-v-6fac57e8]{margin-left:0}.middle .middle-top .tab-content__item--wrapper[data-v-6fac57e8]{display:flex;align-items:center}.middle .middle-top .tab-content__item[data-v-6fac57e8]{display:flex;align-items:center;flex-direction:column;justify-content:center;width:140px;height:170px;margin-right:14px;background-color:#fff;border-radius:10px;cursor:pointer;border:1px solid rgba(0,0,0,.08)}.middle .middle-top .tab-content__item.active[data-v-6fac57e8]{border:1px solid #ff7548;background:linear-gradient(33deg,#ffd1c5 -10%,#ffd1c5 21%,#ffe8e5 85%)}.middle .middle-top .tab-content__item.disabled[data-v-6fac57e8]{cursor:no-drop;background:#f4f4f4}.middle .middle-top .tab-content__item[data-v-6fac57e8]:last-child{margin-right:0}.middle .middle-top .tab-content__item h3[data-v-6fac57e8]{margin-bottom:20px;font-size:15px;font-weight:600}.middle .middle-top .tab-content__item p[data-v-6fac57e8]{margin-top:10px;color:#d9451e}.middle .middle-top .tab-content__item .original-price[data-v-6fac57e8]{display:flex;align-items:center;font-size:12px;color:#888;text-decoration:line-through}.middle .middle-top .tab-content__item .price[data-v-6fac57e8]{display:flex;align-items:baseline;margin-bottom:6px;color:#f13d3d;font-size:16px}.middle .middle-top .tab-content__item .price span[data-v-6fac57e8]{font-weight:700;font-size:36px}.middle .bottom[data-v-6fac57e8]{display:flex;align-items:center;justify-content:flex-end;padding:0 40px}.middle .bottom .bottom-left[data-v-6fac57e8],.middle .bottom .bottom-right[data-v-6fac57e8]{display:flex;flex-direction:column;align-items:center}.middle .bottom .bottom-left[data-v-6fac57e8]{justify-content:center;margin-right:20px}.middle .bottom .paytype[data-v-6fac57e8]{display:flex;align-items:center;margin-top:6px}.middle .bottom .paytype span[data-v-6fac57e8]{margin-left:8px;font-size:14px;color:#666}.middle .bottom .pay-btn[data-v-6fac57e8]{display:flex;align-items:center;margin-top:40px}.middle .bottom .right-price[data-v-6fac57e8]{display:flex;align-items:baseline;margin-bottom:16px;color:#f13d3d;font-size:18px;font-weight:600}.middle .bottom .right-price span[data-v-6fac57e8]{margin-left:4px;font-size:30px;font-weight:900}.middle .bottom .code[data-v-6fac57e8]{width:110px;height:110px}.bottom[data-v-6fac57e8]{display:flex;align-items:center;justify-content:flex-end;padding:0 40px}.bottom .bottom-left[data-v-6fac57e8],.bottom .bottom-right[data-v-6fac57e8]{display:flex;flex-direction:column;align-items:center}.bottom .bottom-left[data-v-6fac57e8]{justify-content:center;margin-right:20px}.bottom .paytype[data-v-6fac57e8]{display:flex;align-items:center;margin-top:6px}.bottom .paytype span[data-v-6fac57e8]{margin-left:8px;font-size:14px;color:#666}.bottom .pay-btn[data-v-6fac57e8]{display:flex;align-items:center;margin-top:40px}.bottom .right-price[data-v-6fac57e8]{display:flex;align-items:baseline;margin-bottom:16px;color:#f13d3d;font-size:18px;font-weight:600}.bottom .right-price span[data-v-6fac57e8]{margin-left:4px;font-size:30px;font-weight:900}.bottom .code[data-v-6fac57e8]{width:110px;height:110px}",""]),e["default"]=s},27302:function(t,e,a){var i=a(24512);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(99548).A;o("054f7bf5",i,!0,{sourceMap:!1,shadowMode:!1})}}]);