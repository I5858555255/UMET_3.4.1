"use strict";(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[7508],{17508:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("ai-list",{staticClass:"Learning"},[e("ai-title",{attrs:{slot:"title",title:"新手园地",isShowBottomBorder:""},slot:"title"}),e("template",{slot:"content"},[e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("el-radio-group",{on:{change:t.onChange},model:{value:t.search.categoryId,callback:function(e){t.$set(t.search,"categoryId",e)},expression:"search.categoryId"}},[e("el-radio-button",{attrs:{label:""}},[t._v("全部")]),e("el-radio-button",{attrs:{label:"isFavorite"}},[t._v("我的收藏")]),t._l(t.cateList,(function(a){return e("el-radio-button",{key:a.id,attrs:{label:a.id}},[t._v(t._s(a.name))])}))],2)]},proxy:!0},{key:"right",fn:function(){},proxy:!0}])}),e("ai-table",{staticStyle:{"margin-top":"8px"},attrs:{tableData:t.tableData,"col-configs":t.colConfigs,total:t.total,current:t.search.current,size:t.search.size},on:{"update:current":function(e){return t.$set(t.search,"current",e)},"update:size":function(e){return t.$set(t.search,"size",e)},getList:t.getList}},[e("el-table-column",{attrs:{slot:"options",label:"操作",align:"center",fixed:"right",width:"140px"},slot:"options",scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",{staticClass:"table-options"},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.collection(a.id,a.isFavorite)}}},[t._v(t._s("0"===a.isFavorite?"收藏":"取消收藏"))]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.toDetail(a.url)}}},[t._v("详情")])],1)]}}])})],1)],1)],2)},s=[],o={name:"Learning",data(){return{colConfigs:[{prop:"title",label:"标题",align:"left"},{prop:"createTime",label:"发布时间",align:"center"}],tableData:[],total:0,search:{current:1,size:10,categoryId:""},cateList:[],isFavorite:0}},created(){this.$store.dispatch("getUserInfo").then((t=>{console.log(t)})),this.getCateList(),this.getList()},methods:{toDetail(t){window.open(t)},onChange(t){"isFavorite"===t?this.$http.post("/api/learning/favoritePage",null,{params:{...this.search}}).then((t=>{0===t.code&&(this.tableData=t.data.records,this.total=t.data.total)})):(this.search.current=1,this.getList())},collection(t,e){this.$confirm("0"===e?"确定收藏该文章?":"确定取消收藏？","温馨提示",{confirmButtonText:"确定",callback:a=>{"confirm"===a&&this.$http.post("0"===e?`/api/learning/addFavorite?id=${t}`:`/api/learning/delFavorite?id=${t}`).then((t=>{0===t.code&&(this.$message.success("0"===e?"收藏成功":"取消成功"),this.getList())}))}})},getCateList(){this.$http.post("/api/learningCategory/page?size=50").then((t=>{0===t.code&&(this.cateList=t.data.records)}))},getList(){this.$http.post("/api/learning/pluginPage",null,{params:{...this.search}}).then((t=>{0===t.code&&(this.tableData=t.data.records,this.total=t.data.total)}))}}},r=o,n=a(81656),l=(0,n.A)(r,i,s,!1,null,"64bd8aea",null),c=l.exports}}]);