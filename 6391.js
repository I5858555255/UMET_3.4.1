(self["webpackChunkpdd"]=self["webpackChunkpdd"]||[]).push([[6391],{16391:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return D}});var i=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[e("keep-alive",{attrs:{include:["List"]}},[e(t.component,{ref:"component",tag:"component",attrs:{params:t.params},on:{change:t.onChange}})],1)],1)],1)},s=[],l=function(){var t=this,e=t._self._c;return e("div",[e("ai-list",{staticClass:"list"},[e("ai-title",{attrs:{slot:"title",title:"分类首页商品跟踪",isShowBottomBorder:""},slot:"title"}),e("template",{slot:"content"},[e("div",{staticClass:"content"},[e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("el-button",{class:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(e){return t.addStore()}}},[t._v("添加分类")])]},proxy:!0},{key:"right",fn:function(){return[e("el-button",{attrs:{size:"small",circle:"",icon:"el-icon-refresh-right"},on:{click:function(e){return t.getList()}}})]},proxy:!0}])}),e("ai-table",{staticStyle:{"margin-top":"8px"},attrs:{tableData:t.tableData,"col-configs":t.colConfigs,total:t.total,current:t.search.current,size:t.search.size},on:{"selection-change":t.onChooseChange,"update:current":function(e){return t.$set(t.search,"current",e)},"update:size":function(e){return t.$set(t.search,"size",e)},getList:t.getList}},[e("el-table-column",{attrs:{slot:"options",label:"操作",width:"240px","show-overflow-tooltip":"",align:"center",fixed:"right"},slot:"options",scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",{staticClass:"table-options"},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.deleteMonitor(a.id)}}},[t._v("删除")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.renew(a.id)}}},[t._v("续费")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.toDetail(a.categoryId)}}},[t._v("详情")])],1)]}}])}),e("el-table-column",{attrs:{slot:"categoryId",label:"分类","show-overflow-tooltip":"",align:"center"},slot:"categoryId",scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("div",[e("a",{staticClass:"el-link el-link--primary",attrs:{href:"https://www.temu.com"+a.categoryUrl,target:"_blank"}},[t._v(t._s(a.categoryName))])])]}}])})],1)],1)])],2),e("ai-dialog",{attrs:{title:"添加分类",visible:t.isDlgShow,"close-on-click-modal":!1,width:"790px",customFooter:""},on:{"update:visible":function(e){t.isDlgShow=e},close:function(e){t.isDlgShow=!1}}},[e("el-alert",{attrs:{title:"添加一个分类，将消耗300金币",type:"success",closable:!1}}),e("el-form",{ref:"form",staticClass:"ai-form",staticStyle:{"margin-top":"20px"},attrs:{model:t.form,"label-width":"120px"}},[e("el-form-item",{attrs:{prop:"categoryId",label:"分类",rules:[{required:!0,message:"请选择分类",trigger:"blur"}]}},[e("el-cascader",{staticStyle:{width:"380px"},attrs:{props:t.props},model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.isDlgShow=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveStore}},[t._v("确定")])],1)],1)],1)},r=[],o=(a(81454),{name:"List",data(){let t=this;return{search:{current:1,type:"1",size:10},colConfigs:[{type:"selection",width:"70px",align:"left"},{slot:"categoryId",label:"分类",align:"left"},{prop:"status",label:"状态",align:"left",format:t=>this.$dict.getLabel("monitor_status",t)},{prop:"expireTime",label:"失效时间",align:"left"},{prop:"createTime",label:"添加时间",width:"180px",fixed:"right"}],tableData:[],total:0,form:{categoryId:""},props:{value:"optId",label:"name",lazy:!0,lazyLoad(e,a){t.$http.post("/api/category/listAllByParentId",null,{params:{parentId:e.value||0}}).then((t=>{let i=e.value||0;0===t.code&&a(t.data.map((t=>({...t,leaf:0!=i}))))}))}},isDlgShow:!1,selectRows:[]}},created(){this.$dict.load("monitor_status"),this.getList()},methods:{getList(){this.$http.post("/api/specialMonitor/myPage",null,{params:{...this.search}}).then((t=>{this.tableData=t.data.records,this.total=t.data.total}))},onChooseChange(t){this.selectRows=t},saveStore(){this.$refs.form.validate((t=>{t&&this.$http.post("/api/specialMonitor/check",null,{params:{type:1}}).then((t=>{0==t.code&&this.$http.post("/api/specialMonitor/add",{categoryId:this.form.categoryId[this.form.categoryId.length-1]}).then((t=>{0==t.code&&(this.$message.success("添加成功！"),this.$store.dispatch("getUserInfo"),this.getList(),this.isDlgShow=!1)}))}))}))},batchRemove(){if(this.selectRows.length<=0)return void this.$message.error("请选择要删除的分类");let t=this.selectRows.map((t=>t.id));this.$confirm("确定要删除？","温馨提示",{type:"warning"}).then((()=>{this.$http.post("/api/specialMonitor/delByIds",t).then((t=>{0==t.code&&(this.$message.success("删除成功！"),this.getList())}))}))},renew(t){this.$confirm("确定要续费？","温馨提示",{type:"warning"}).then((()=>{this.$http.post("/api/specialMonitor/renew",null,{params:{id:t}}).then((t=>{0==t.code&&(this.$message.success("续费成功！"),this.$store.dispatch("getUserInfo"),this.getList())}))}))},deleteMonitor(t){this.$confirm("确定要删除？","温馨提示",{type:"warning"}).then((()=>{this.$http.post("/api/specialMonitor/del",null,{params:{id:t}}).then((t=>{0==t.code&&(this.$message.success("删除成功！"),this.getList())}))}))},toDetail(t){this.$emit("change",{type:"Detail",params:{id:t||""}})},addStore(){this.form.mallId="",this.isDlgShow=!0}}}),n=o,c=a(81656),p=(0,c.A)(n,l,r,!1,null,"04c75a74",null),d=p.exports,h=function(){var t=this,e=t._self._c;return e("div",[e("ai-list",{staticClass:"list"},[e("ai-title",{attrs:{slot:"title",title:"商品列表",isShowBottomBorder:"",isShowBack:""},on:{onBackClick:function(e){return t.cancel(!1)}},slot:"title"}),e("template",{slot:"content"},[e("ai-search-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[e("label",{staticStyle:{width:"80px"}},[t._v("排序方式：")]),e("el-select",{attrs:{clearable:!0,placeholder:"请选择排序方式",size:"small"},on:{change:function(e){t.search.current=1,t.getList()}},model:{value:t.search.orderBy,callback:function(e){t.$set(t.search,"orderBy",e)},expression:"search.orderBy"}},t._l(t.orderBys,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("label",{staticStyle:{width:"80px"}},[t._v("价格区间：")]),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.priceBegin,callback:function(e){t.$set(t.search,"priceBegin",e)},expression:"search.priceBegin"}}),t._v(" ~ "),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.priceEnd,callback:function(e){t.$set(t.search,"priceEnd",e)},expression:"search.priceEnd"}}),e("label",{staticStyle:{width:"80px"}},[t._v("销量区间：")]),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.saleBegin,callback:function(e){t.$set(t.search,"saleBegin",e)},expression:"search.saleBegin"}}),t._v(" ~ "),e("el-input",{staticStyle:{width:"80px"},attrs:{clearable:!0,size:"small"},model:{value:t.search.saleEnd,callback:function(e){t.$set(t.search,"saleEnd",e)},expression:"search.saleEnd"}})]},proxy:!0},{key:"right",fn:function(){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.search.current=1,t.getList()}}},[t._v("查询")])]},proxy:!0}])}),e("div",{staticStyle:{"margin-right":"0px","margin-bottom":"10px"}}),e("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr 1fr 1fr 1fr 1fr",gap:"16px"}},[t._l(t.tableData,(function(a){return e("el-card",{key:a.id,attrs:{"body-style":{padding:"0px",margin:"5px"}}},[e("el-image",{staticClass:"image",attrs:{src:a.imgUrl,"preview-src-list":[a.imgUrl]}}),e("div",{staticStyle:{padding:"14px"}},[e("div",{staticClass:"bottom clearfix"},[e("div",{staticStyle:{"margin-bottom":"5px"}},[e("div",{staticStyle:{display:"inline","margin-left":"5px"}},[t._v("$"+t._s(a.price)),e("sub",{staticStyle:{"margin-left":"2px"},domProps:{innerHTML:t._s(t.getPricePercent(a.priceChange))}})]),e("div",{staticStyle:{display:"inline","margin-right":"5px",float:"right"}},[t._v(t._s(a.saleTotal)),e("sub",{staticStyle:{"margin-left":"2px"},domProps:{innerHTML:t._s(t.getSalePercent(a.saleChange))}})])]),e("ai-product-drop-down",{staticStyle:{float:"right"},attrs:{params:a,isShowDetail:!0,isShowAddFavorite:!1,isShowDelFavorite:!1},on:{onGoDetail:function(e){return t.goDetail(a.goodsId,a.categoryId)}}})],1)])],1)})),e("el-pagination",{staticStyle:{position:"absolute",bottom:"0px",right:"40px"},attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.search.size,"current-page":t.search.current},on:{"update:pageSize":function(e){return t.$set(t.search,"size",e)},"update:page-size":function(e){return t.$set(t.search,"size",e)},"update:currentPage":function(e){return t.$set(t.search,"current",e)},"update:current-page":function(e){return t.$set(t.search,"current",e)},"current-change":t.getList}})],2)],1)],2),e("div",{staticClass:"productDetail"},[e("el-dialog",{attrs:{title:"商品详情",visible:t.isShowDetailDlg,"close-on-click-modal":!1,width:"80%","before-close":t.handleClose}},[t.isShowDetailDlg?e("ai-special-product-detail",{attrs:{params:t.detailParams}}):t._e()],1)],1)],1)},u=[],g=a(72276),m=a(8418),f={name:"DetailPage",props:["params"],components:{AiSpecialProductDetail:g["default"],AiProductDropDown:m["default"]},data(){return{categoryId:"",search:{current:1,type:"1",size:120,orderBy:"",priceBegin:"",priceEnd:"",saleBegin:"",saleEnd:""},orderBys:[{value:"0",label:"按销量涨辐排序"},{value:"1",label:"按价格涨辐排序"},{value:"2",label:"按销量排序"},{value:"3",label:"按价格排序"}],tableData:[],total:0,isShowDetailDlg:!1,detailParams:{}}},created(){this.categoryId=this.params.id,this.getList()},methods:{getList(){this.$http.post("/api/specialDetail/myPageNew",null,{params:{categoryId:this.categoryId,...this.search}}).then((t=>{this.tableData=t.data.records,this.total=t.data.total}))},cancel(t){this.$emit("change",{type:"List",isRefresh:!!t})},getPricePercent(t){return t<0?'<div style="display: inline; color: green">↓'+t+"%</div>":t>0?'<div style="display: inline; color: red">↑'+t+"%</div>":""},getSalePercent(t){return t<0?'<div style="display: inline; color: green">↓'+t+"%</div>":t>0?'<div style="display: inline; color: red">↑'+t+"%</div>":""},handleClose(){this.isShowDetailDlg=!1},goDetail(t,e){this.detailParams={goodsId:t,categoryId:e},this.isShowDetailDlg=!0}}},y=f,v=(a(3675),(0,c.A)(y,h,u,!1,null,"2e7a166a",null)),b=v.exports,w={name:"IndexTrack",label:"首页跟踪",components:{List:d,Detail:b},data(){return{component:"List",params:{}}},methods:{onChange(t){"Detail"===t.type&&(this.component="Detail",this.params=t.params),"List"===t.type&&(this.component="List",this.params=t.params,this.$nextTick((()=>{t.isRefresh&&setTimeout((()=>{this.$refs.component.getList()}),600)})))}}},x=w,S=(0,c.A)(x,i,s,!1,null,"e195f0c4",null),D=S.exports},96793:function(t,e,a){"use strict";a.r(e);var i=a(31601),s=a.n(i),l=a(76314),r=a.n(l),o=r()(s());o.push([t.id,'.productDetail[data-v-2e7a166a] .el-dialog{height:78vh;overflow:auto}.time[data-v-2e7a166a]{font-size:13px;color:#999}.bottom[data-v-2e7a166a]{margin-top:13px;line-height:12px}.button[data-v-2e7a166a]{padding:0;float:right}.image[data-v-2e7a166a]{width:100%;display:block}.clearfix[data-v-2e7a166a]:after,.clearfix[data-v-2e7a166a]:before{display:table;content:""}.clearfix[data-v-2e7a166a]:after{clear:both}.el-dropdown-link[data-v-2e7a166a]{cursor:pointer;color:#409eff}.el-icon-arrow-down[data-v-2e7a166a]{font-size:12px}',""]),e["default"]=o},3675:function(t,e,a){var i=a(96793);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(99548).A;s("3e6ae149",i,!0,{sourceMap:!1,shadowMode:!1})}}]);